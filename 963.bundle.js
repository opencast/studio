"use strict";(self.webpackChunkopencast_studio=self.webpackChunkopencast_studio||[]).push([[963],{963:function(e,t,r){r.d(t,{App:function(){return nn}});var n,i,o=r(5409),s=r(1699),a=r(6540),l=r(3),d=r(2022);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(null,arguments)}var u,p=e=>a.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"step-current_svg__feather step-current_svg__feather-circle",viewBox:"0 0 24 24"},e),n||(n=a.createElement("circle",{cx:12,cy:12,r:10})),i||(i=a.createElement("circle",{cx:12,cy:12,r:3,fill:"currentColor"})));function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(null,arguments)}var m=e=>a.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",className:"step-done_svg__feather step-done_svg__feather-circle",viewBox:"0 0 24 24"},e),u||(u=a.createElement("path",{d:"M12 1A11 11 0 0 0 1 12a11 11 0 0 0 11 11 11 11 0 0 0 11-11A11 11 0 0 0 12 1m5 7a1 1 0 0 1 .707.293 1 1 0 0 1 0 1.414l-7 7a1 1 0 0 1-1.414 0l-3-3a1 1 0 0 1 0-1.414 1 1 0 0 1 1.414 0L10 14.586l6.293-6.293A1 1 0 0 1 17 8"}))),g=r(2268),v=r(3015);const f=(e,t,r)=>{const n=e&&{max:e},i=("number"==typeof t?.height?t.height:t.height?.ideal)??r;return{height:{...n,...i&&(e?{ideal:Math.min(i,e)}:{ideal:i})}}};async function b(e,t){try{const r=await navigator.mediaDevices.getUserMedia({audio:!t||{deviceId:t},video:!1});r.getTracks().forEach(t=>{t.onended=()=>{e({type:"AUDIO_UNEXPECTED_END"})}}),e({type:"SHARE_AUDIO",stream:r})}catch(t){console.error("Error: ",t),e({type:"BLOCK_AUDIO"})}}async function x(e,t,r={}){const n=t.display?.maxFps?{frameRate:{max:t.display.maxFps}}:{},i=f(t.display?.maxHeight,r),o={video:{cursor:"always",...n,...r,...i},audio:!0};try{const t=await navigator.mediaDevices.getDisplayMedia(o);t.getTracks().forEach(t=>{t.onended=()=>{e({type:"DISPLAY_UNEXPECTED_END"})}}),e({type:"SHARE_DISPLAY",stream:t})}catch(t){console.error("Error: ",t),e({type:"BLOCK_DISPLAY"})}}async function w(e,t,r){const n=t.camera?.maxFps?{frameRate:{max:t.camera.maxFps}}:{},i=f(t.camera?.maxHeight,r,1080),o={video:{facingMode:"user",...r,...n,...i},audio:!1};try{const t=await navigator.mediaDevices.getUserMedia(o);t.getTracks().forEach(t=>{t.onended=()=>{e({type:"USER_UNEXPECTED_END"})}}),e({type:"SHARE_USER",stream:t})}catch(t){console.error("Error: ",t),e({type:"BLOCK_USER"})}}function y(e,t){e?.getTracks().forEach(e=>e.stop()),t({type:"UNSHARE_AUDIO"})}function Y(e,t){e?.getTracks().forEach(e=>e.stop()),t({type:"UNSHARE_DISPLAY"})}function k(e,t){e?.getTracks().forEach(e=>e.stop()),t({type:"UNSHARE_USER"})}var S=r(37),C=r(2017),D=r.n(C),A=r(3747);const R=a.createContext(null),E=()=>(0,g.se)(R,"useVideoBoxResize"),H=({gap:e=0,minWidth:t=180,minHeight:r=140,children:n})=>{const[{width:i,height:l},d]=(0,a.useState)({width:1,height:1}),c=(0,a.useMemo)(()=>new ResizeObserver(e=>{const t=e[0].contentBoxSize[0];d({width:t.inlineSize,height:t.blockSize})}),[]),u=(0,a.useRef)(null);(0,a.useEffect)(()=>(u.current&&c.observe(u.current),()=>c.disconnect()));const[,p]=(0,a.useState)(0),h=(0,a.useRef)(n.map(()=>null)),m=e=>{e.forEach((e,t)=>{e&&(h.current[t]=e)})};let g=n.map(e=>e.dimensions());m(g);const v=()=>{const e=n.map(e=>e.dimensions());D()(e,g)||(g=e,m(g),p(e=>e+1))},f=e=>null==e?16/9:e[0]/e[1];switch(n.length){case 1:{const e=n[0],o=f(h.current[0]);let a,d;return i>l*o?(d=l,a=l*o):(a=i,d=i/o),(0,A.Y)(R.Provider,{value:v,children:(0,A.Y)("div",{ref:u,css:(0,s.AH)({flex:"1 0 0",minHeight:r,display:"flex"},"",""),children:(0,A.Y)("div",{css:(0,s.AH)({...!e.autoSize&&{height:d,width:a},minWidth:`${t}px`,margin:"auto"},"",""),children:e.body})})})}case 2:{const o=h.current.map(e=>f(e)),{rowWidths:a,rowHeights:d}=(()=>{const t=i-e,r=o[0]+o[1];if(t>l*r)return{rowHeights:Array(2).fill(l),rowWidths:o.map(e=>l*e)};{const e=t/r;return{rowHeights:n.map(()=>e),rowWidths:o.map(t=>e*t)}}})(),{colWidths:c,colHeights:p}=(()=>{const t=l-e,r=1/(1/o[0]+1/o[1]);if(i>t*r){const e=t*r;return{colHeights:n.map((t,r)=>e/o[r]),colWidths:Array(2).fill(e)}}return{colHeights:n.map((e,t)=>i/o[t]),colWidths:Array(2).fill(i)}})();let m,g,b;return a[0]*d[0]+a[1]*d[1]>c[0]*p[0]+c[1]*p[1]?(b="row",m=a,g=d):(b="column",m=c,g=p),(0,A.Y)(R.Provider,{value:v,children:(0,A.FD)("div",{ref:u,css:(0,s.AH)({flex:"1 0 0",display:"flex",gap:e,flexDirection:b,justifyContent:"space-between",minHeight:r},"",""),children:[(0,A.Y)("div",{css:(0,s.AH)({...!n[0].autoSize&&{height:g[0],width:m[0]},minWidth:`${t}px`,margin:"auto"},"",""),children:n[0].body}),(0,A.Y)("div",{css:(0,s.AH)({...!n[1].autoSize&&{height:g[1],width:m[1]},minWidth:`${t}px`,margin:"auto"},"",""),children:n[1].body})]})})}default:return(0,o.jr)("Internal error: too few or too many video streams")}};var F={name:"1eeok3z",styles:"display:block;font-size:17px;margin-bottom:8px"},T={name:"b1vrpl",styles:"font-size:15px;max-width:100ch"},L={name:"1t84eec",styles:"font-size:15px;max-width:100ch;margin-top:8px"};const B=({title:e,body:t,extraBody:r,...n})=>(0,A.FD)("div",{"aria-live":"polite",css:(0,s.AH)({padding:"16px 22px",margin:12,borderRadius:8,backgroundColor:g.lm.danger1,color:g.lm.danger5},"",""),...n,children:[e&&(0,A.Y)("strong",{css:F,children:e}),(0,A.Y)("div",{css:T,children:t}),r&&(0,A.Y)("div",{css:L,children:r})]});var O=r(2263);const z=a.forwardRef((e,t)=>(0,A.Y)("select",{ref:t,...e,css:(0,s.AH)({position:"relative",borderRadius:6,padding:"6px 12px",paddingRight:32,backgroundColor:"transparent",border:`1px solid ${g.lm.neutral25}`,appearance:"none",background:`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='2' height='1' fill='${"light"===(0,o.Ut)().scheme?"%23555":"%23aaa"}'><polygon points='0,0 2,0 1,1'/></svg>") no-repeat`,backgroundSize:12,backgroundPosition:"calc(100% - 12px) center",option:{backgroundColor:g.lm.neutral05,color:g.lm.neutral90},...(0,g.Y$)({offset:-1})},"",""),children:e.children})),U=(e,t=!1)=>({..."deviceId"in e&&{deviceId:{[t?"exact":"ideal"]:e.deviceId}},..."aspectRatio"in e&&{aspectRatio:{ideal:e.aspectRatio?P(e.aspectRatio):void 0}},..."quality"in e&&{height:{ideal:e.quality?$(e.quality):void 0}}}),I=["4:3","16:9"],P=e=>({"4:3":4/3,"16:9":16/9}[e]??void 0),$=e=>{if(/^[0-9]+p$/.test(e))return parseInt(e)},M="ocStudioLastVideoDevice",j="ocStudioCameraAspectRatio",_="ocStudioCameraQuality",W="ocStudioDisplayQuality",q=()=>({deviceId:window.localStorage.getItem(M)??void 0,aspectRatio:window.localStorage.getItem(j)||"auto",quality:window.localStorage.getItem(_)||"auto"}),N=()=>({quality:window.localStorage.getItem(W)||"auto"});var K={name:"1v2iei1",styles:"position:absolute;right:8px;bottom:8px"},G={name:"13h0jku",styles:"max-width:min(670px, 100vw - 16px)"};const V=({isDesktop:e,stream:t})=>{const r=(0,v.wA)(),n=(0,O.t0)(),i=(0,a.useRef)(null),{t:c}=(0,d.Bd)(),u="light"===(0,o.Ut)().scheme,{isHighContrast:p}=(0,o.Ut)(),h=e?N():q(),m=i=>{const o={...h,...i},s=U(o,!0),a=(e,t)=>{null!=t&&window.localStorage.setItem(e,t)};e?(a(W,o.quality),Y(t,r),x(r,n,s)):(a(M,o.deviceId),a(j,o.aspectRatio),a(_,o.quality),k(t,r),w(r,n,s))};(0,a.useEffect)(()=>{const r=ie(t);!e&&r&&window.localStorage.setItem(M,r)});const[f,b]=(0,a.useState)(!1),y=c("steps.video.video-settings-"+(f?"close":"open"));return(0,A.FD)(A.FK,{children:[(0,A.Y)("div",{css:(0,s.AH)({display:f?"initial":"none",position:"absolute",top:12,left:0,right:0,textAlign:"center"},"",""),children:(0,A.Y)("span",{css:(0,s.AH)({color:u?g.lm.neutral70:g.lm.neutral90,backgroundColor:g.lm.neutral05,borderRadius:"10px",padding:"4px 8px",boxShadow:p?"none":"0 0 12px rgba(0, 0, 0, 30%)"},"",""),children:X(t)})}),(0,A.FD)(o.K1,{ref:i,placement:"top-end",ariaRole:"dialog",open:f,onClose:()=>b(!1),borderRadius:8,viewPortMargin:8,css:K,children:[(0,A.Y)(o.vh,{children:(0,A.Y)(o.kR,{placement:"bottom",tooltip:y,children:(0,A.Y)(o.b1,{onClick:()=>b(e=>!e),"aria-label":y,css:(0,s.AH)({...fe,fontSize:26,"> svg":{transition:"transform 0.2s"},"&:hover > svg, &:focus > svg":{transform:f?"none":"rotate(45deg)"}},"",""),children:f?(0,A.Y)(l.yGN,{}):(0,A.Y)(l.VSk,{})})})}),(0,A.FD)(o.DE,{css:G,borderWidth:u?0:1,shadowBlur:16,padding:18,children:[(0,A.FD)("div",{css:(0,s.AH)({display:"grid",width:"100%",gridTemplateColumns:"auto 1fr",gridGap:"14px 32px",paddingLeft:4,[(0,o.pi)(450)]:{columnGap:8},[(0,o.pi)(360)]:{gridTemplateColumns:"1fr",rowGap:0},fontSize:14,"@media (min-width: 420px) and (min-height: 440px)":{fontSize:16}},"",""),children:[!e&&(0,A.Y)(re,{updatePrefs:m,prefs:h,isExpanded:f}),(0,A.Y)(ee,{isDesktop:e,updatePrefs:m,prefs:h,stream:t,settings:n,isExpanded:f})]}),(0,A.Y)("div",{css:(0,s.AH)({backgroundColor:g.lm.neutral15,marginTop:8,padding:"8px 12px",fontSize:12,lineHeight:1.25,borderRadius:6,"@media (min-width: 420px) and (min-height: 440px)":{fontSize:14}},"",""),children:(0,A.FD)(d.x6,{i18nKey:"steps.video.preferences-note",children:[(0,A.Y)("strong",{children:"Note:"})," Explanation."]})})]})]})]})},X=e=>{const t=e?.getVideoTracks()?.[0]?.getSettings(),r=t&&t.width&&t.height?`${t.width}Ã—${t.height}`:"",n=t&&t.frameRate?`${t.frameRate} fps`:"";return t?[r,n].join(", "):"..."},Z=({children:e})=>(0,A.Y)("div",{css:(0,s.AH)({display:"flex",flexDirection:"column",justifyContent:"center",[(0,o.pi)(360)]:{marginTop:4}},"",""),children:e});var Q={name:"1uqn15b",styles:"display:flex;flex-wrap:wrap;gap:6px"};const J=({children:e})=>(0,A.Y)("div",{css:Q,children:e}),ee=({isDesktop:e,updatePrefs:t,prefs:r,settings:n})=>{const{t:i}=(0,d.Bd)(),o=e=>t({quality:e}),s=(e=>{const t=[360,480,720,1080,1440,2160].filter(t=>!e||t<=e);return!e||0!==t.length&&t[t.length-1]===e||t.push(e),t.map(e=>`${e}p`)})(e?n.display?.maxHeight:n.camera?.maxHeight),a=e?"desktop":"user";return(0,A.FD)(A.FK,{children:[(0,A.Y)(Z,{children:i("steps.video.quality")}),(0,A.FD)(J,{children:[(0,A.Y)(ne,{id:`quality-auto-${a}`,value:"auto",name:`quality-${a}`,label:i("steps.video.quality-auto"),onChange:o,checked:s.every(e=>r.quality!==e)}),s.map(e=>(0,A.Y)(ne,{id:`quality-${e}-${a}`,value:e,name:`quality-${a}`,onChange:o,checked:r.quality===e},`${e}-${a}`))]})]})};var te={name:"1d3w5wq",styles:"width:100%"};const re=({updatePrefs:e,prefs:t})=>{const{t:r}=(0,d.Bd)(),n=(0,v.pv)(),i=ie(n.userStream),o=(0,g.r_)(n.mediaDevices,"videoinput"),s=t=>e({aspectRatio:t});return(0,A.FD)(A.FK,{children:[(0,A.Y)(Z,{children:(0,A.Y)("label",{htmlFor:"sources-video-device",children:r("steps.video.device")})}),(0,A.Y)(J,{children:(0,A.Y)(z,{id:"sources-video-device",value:i,onChange:t=>{return r=t.target.value,e({deviceId:r});var r},css:te,children:o.map(e=>(0,A.Y)("option",{value:e.deviceId,children:e.label},e.deviceId))})}),(0,A.Y)(Z,{children:r("steps.video.aspect-ratio")}),(0,A.FD)(J,{children:[(0,A.Y)(ne,{id:"ar-auto",value:"auto",name:"aspectRatio",label:r("steps.video.aspect-ratio-auto"),onChange:s,checked:I.every(e=>t.aspectRatio!==e)}),I.map(e=>(0,A.Y)(ne,{id:`ar-${e}`,value:e,name:"aspectRatio",onChange:s,checked:t.aspectRatio===e},e))]})]})},ne=({id:e,value:t,checked:r,name:n,onChange:i,label:a})=>{const{isHighContrast:l}=(0,o.Ut)();return(0,A.FD)("div",{children:[(0,A.Y)("input",{type:"radio",onChange:e=>i(e.target.value),id:e,value:t,checked:r,name:n,css:(0,s.AH)({display:"none","&+label":{display:"block",border:`1px solid ${g.lm.neutral25}`,lineHeight:1.2,padding:"4px 10px",borderRadius:6,fontWeight:500,cursor:"pointer",":hover":{backgroundColor:g.lm.neutral10,borderColor:g.lm.neutral40,...l&&{outline:`2px solid ${g.lm.accent4}`,borderColor:"transparent"}}},"&:checked+label":{backgroundColor:g.lm.accent6,borderColor:g.lm.accent6,color:g.lm.neutral05,cursor:"default"}},"","")}),(0,A.Y)("label",{tabIndex:0,onKeyDown:e=>("Enter"===e.key||" "===e.key)&&i(t),htmlFor:e,children:a??t})]})},ie=e=>e?.getVideoTracks()?.[0]?.getSettings()?.deviceId,oe=({inputs:e})=>{const t=(0,o.YW)(e.length,{1:()=>[{body:(0,A.Y)(ae,{input:e[0]}),dimensions:()=>(0,g.VM)(e[0].stream),autoSize:se(e[0])}],2:()=>[{body:(0,A.Y)(ae,{input:e[0]}),dimensions:()=>(0,g.VM)(e[0].stream),autoSize:se(e[0])},{body:(0,A.Y)(ae,{input:e[1]}),dimensions:()=>(0,g.VM)(e[1].stream),autoSize:se(e[1])}]})??(0,o.HB)();return(0,A.Y)(H,{gap:20,children:t})},se=e=>!1===e.allowed||!!e.unexpectedEnd,ae=({input:e})=>{const{isHighContrast:t}=(0,o.Ut)();return(0,A.FD)("div",{css:(0,s.AH)({height:"100%",backgroundColor:g.lm.neutral05,borderRadius:12,position:"relative",...!se(e)&&{boxShadow:t?"none":"0 6px 16px rgba(0, 0, 0, 0.2)"},...t&&{outline:`1px solid ${g.lm.neutral90}`}},"",""),children:[(0,A.Y)(me,{input:e}),e.stream&&(0,A.FD)(A.FK,{children:[e.isDesktop&&(0,A.Y)(ve,{stream:e.stream}),(0,A.Y)(V,{isDesktop:e.isDesktop,stream:e.stream})]})]})};var le={name:"ti75j2",styles:"margin:0"},de={name:"ti75j2",styles:"margin:0"},ce={name:"10jtkcq",styles:"display:flex;flex-direction:column;width:100%;height:100%"},ue={name:"r3950p",styles:"flex:1;display:flex;justify-content:center;align-items:center"},pe={name:"bjn8wh",styles:"position:relative"},he={name:"480t9l",styles:"min-height:0;display:block;width:100%;height:100%;border-radius:12px"};const me=({input:e})=>{const{t:t}=(0,d.Bd)(),{allowed:r,stream:n,unexpectedEnd:i}=e,l=E(),c=(0,a.useRef)(null);if((0,a.useEffect)(()=>{const e=c.current;return e&&(e.srcObject||(e.srcObject=n),e.addEventListener("resize",l)),()=>{e&&e.removeEventListener("resize",l)}},[n,l]),!n){let n;return n=!1===r||i?(0,A.FD)("div",{children:[!1===r&&(0,A.Y)(B,{css:le,title:t(`steps.video.${e.isDesktop?"display":"user"}-not-allowed-title`),body:t(`steps.video.${e.isDesktop?"display":"user"}-not-allowed-text`)}),i&&(0,A.Y)(B,{css:de,body:t("error-lost-video-stream")})]}):(0,A.Y)(o.y$,{size:75,css:(0,s.AH)({color:g.lm.neutral60},"","")}),(0,A.Y)("div",{css:ce,children:(0,A.Y)("div",{css:ue,children:n})})}return(0,A.Y)("div",{css:pe,children:(0,A.Y)("video",{ref:c,autoPlay:!0,muted:!0,playsInline:!0,css:he})})};var ge={name:"kmthlo",styles:"position:absolute;top:8px;right:8px"};const ve=({stream:e})=>{const t=e.getAudioTracks().length;return(0,A.Y)("div",{css:ge,children:(0,A.Y)(o.kR,{placement:"top",tooltip:(0,A.FD)(d.x6,{i18nKey:"steps.video."+(t?"display-audio-shared":"display-audio-not-shared"),children:[(0,A.Y)("strong",{children:"Note:"})," Explanation."]}),children:(0,A.FD)("div",{css:(0,s.AH)({...fe,fontSize:15},"",""),children:[(0,A.Y)(S.MO8,{})," ",t?(0,A.Y)(S.exc,{}):(0,A.Y)(S.sRF,{})]})})})},fe={border:"none",display:"inline-block",backgroundColor:"rgba(0, 0, 0, 0.3)",color:"white",padding:8,backdropFilter:"invert(0.3) blur(4px)",lineHeight:0,borderRadius:10,cursor:"pointer","&:hover, &:focus-visible":{backgroundColor:"rgba(0, 0, 0, 0.5)"},"&:focus-visible":{outline:"5px dashed white",outlineOffset:-2.5}};var be=r(2754),xe=r(4638);const we=()=>navigator.userAgent.includes("Mac"),ye={general:{showAvailableShortcuts:"Alt; s",showOverview:"?",closeOverlay:"Escape",tab:"Tab",prev:we()?"Shift+Mod+left":"Mod+left",next:we()?"Shift+Mod+right":"Mod+right"},videoSetup:{selectScreen:"1",selectBoth:"2",selectUser:"3"},audioSetup:{withAudio:"1",withoutAudio:"2"},recording:{startPauseResume:"k; Space"},review:{playPause:"k; Space",forwards5secs:"l; right",backwards5secs:"j; left",forwardsFrame:".",backwardsFrame:",",cutLeft:"n",cutRight:"m",removeCutLeft:"Shift+n",removeCutRight:"Shift+m"},finish:{startNewRecording:"Shift+n",download:"d"}},Ye={general:{showAvailableShortcuts:"shortcuts.general.show-available-shortcuts",showOverview:"shortcuts.general.show-overview",closeOverlay:"shortcuts.general.close-overlay",tab:"shortcuts.general.tab-elements",prev:"shortcuts.general.back-button",next:"shortcuts.general.next-button"},videoSetup:{selectScreen:"shortcuts.select-video.select-display",selectBoth:"shortcuts.select-video.select-both",selectUser:"shortcuts.select-video.select-camera"},audioSetup:{withAudio:"shortcuts.select-audio.select-microphone",withoutAudio:"shortcuts.select-audio.select-no-audio"},recording:{startPauseResume:"shortcuts.record.start-pause-resume-recording"},review:{playPause:"shortcuts.review.play-pause",forwards5secs:"shortcuts.review.skip-five",backwards5secs:"shortcuts.review.back-five",forwardsFrame:"shortcuts.review.frame-forward",backwardsFrame:"shortcuts.review.frame-back",cutLeft:"shortcuts.review.cut-left",cutRight:"shortcuts.review.cut-right",removeCutLeft:"shortcuts.review.delete-left",removeCutRight:"shortcuts.review.delete-right"},finish:{startNewRecording:"shortcuts.finish.new-recording",download:"steps.finish.save-locally.label"}},ke={Escape:"escape",Space:"space",Shift:"shift",Alt:we()?"option":"alt",Mod:we()?"command":"control"},Se=(e,t,r={},n=[])=>(0,be.vC)(e,t,{delimiter:";",...r},n),Ce=()=>{const[e,t]=(0,a.useState)(!1),r=e=>{ye.general.showAvailableShortcuts.split(";").some(t=>t.trim().toLowerCase()==e.key.toLowerCase())&&t(!0)},n=()=>t(!1);return(0,a.useEffect)(()=>(document.addEventListener("keydown",r),document.addEventListener("keyup",n),document.addEventListener("mousedown",n),window.addEventListener("blur",n),()=>{document.removeEventListener("keydown",r),document.removeEventListener("keyup",n),document.removeEventListener("mousedown",n),window.removeEventListener("blur",n)})),e},De=({shortcut:e,large:t=!1})=>{const{t:r}=(0,d.Bd)();return(0,A.Y)(o.o_,{children:e.split("+").map((e,n)=>{let i=e;e in ke&&(i=r(`shortcuts.keys.${ke[e]}`));const a=(0,o.YW)(e,{left:()=>(0,A.Y)(l.kRp,{title:i}),right:()=>(0,A.Y)(l.dyV,{title:i}),Mod:()=>we()?(0,A.Y)(l.JSe,{title:i}):(0,A.Y)(A.FK,{children:i}),Alt:()=>we()?(0,A.Y)(S.z_U,{title:i}):(0,A.Y)(A.FK,{children:i}),Shift:()=>(0,A.FD)(A.FK,{children:[i,(0,A.Y)(S.Uqt,{size:20,title:i})]}),Tab:()=>(0,A.FD)(A.FK,{children:[i,(0,A.Y)(xe.A,{})]})})??(0,A.Y)(A.FK,{children:i});return(0,A.Y)(o.x9,{css:(0,s.AH)({..."l"===e&&{fontFamily:"monospace"},...!t&&{height:30,minWidth:30,backgroundColor:g.lm.neutral10,color:g.lm.neutral80}},"",""),children:a},n)})})},Ae=({close:e})=>{const{t:t}=(0,d.Bd)();return(0,A.Y)(Jr,{maxWidth:1e3,close:e,title:t("shortcuts.label"),children:Object.entries(ye).map(([e,r])=>{const n=e,i=Object.entries(r).map(([e,r])=>({label:t(Ye[n][e]),combinations:r.split(";").map((e,t)=>(0,A.Y)(De,{shortcut:e.trim(),large:!0},t))}));return(0,A.Y)(o.XF,{alternativeSeparator:t("shortcuts.sequence-seperator"),title:t(Re[n]),shortcuts:i},e)})})},Re={general:"shortcuts.general.title",videoSetup:"steps.video.label",audioSetup:"steps.audio.label",recording:"steps.record.label",review:"steps.review.label",finish:"steps.finish.label"};var Ee={name:"0",styles:""},He={name:"iqv73y",styles:"border-radius:8px;margin:0;padding-left:0;overflow:hidden;list-style:none"};const Fe=({kind:e,label:t,icon:r,disabled:n,danger:i,onClick:c,popoverEntries:u})=>{const{t:p}=(0,d.Bd)(),h=Ce(),m="dark"===(0,o.Ut)().scheme,{isHighContrast:v}=(0,o.Ut)(),f=(0,o.YW)(e,{prev:()=>ye.general.prev,next:()=>ye.general.next}),[b,x]=(0,a.useState)(!1),w=u?()=>x(e=>!e):()=>c?.();Se(f,w,{enabled:!n},[w,f,n]);const y=(0,A.FD)(o.b1,{disabled:n,onClick:w,css:(0,s.AH)({position:"relative",display:"flex",gap:8,alignItems:"center",lineHeight:1,...(0,g.Y$)({offset:-1}),...i&&{"--color-focus":g.lm.danger4},borderRadius:8,border:`1px solid ${i?g.lm.danger4:g.lm.neutral50}`,color:i?g.lm.danger4:g.lm.neutral80,backgroundColor:i?g.lm.danger0:g.lm.neutral05,padding:"12px 24px",...(0,o.YW)(e,{next:()=>({paddingRight:16}),prev:()=>({paddingLeft:16})}),'&[data-floating-state="open"] svg':{transform:"rotate(-90deg)"},svg:{transition:"transform 0.15s",flexShrink:0},"&[disabled]":{color:g.lm.neutral60,borderColor:g.lm.neutral15,backgroundColor:g.lm.neutral15},"&:not([disabled]):hover, &:not([disabled]):focus-visible":{borderColor:i?g.lm.danger5:g.lm.neutral70,color:i?g.lm.danger5:g.lm.neutral90,boxShadow:v?"none":"0 0 8px var(--shadow-color)",...i&&{backgroundColor:g.lm.danger1},...v&&{outline:`2px solid ${i?g.lm.danger5:g.lm.accent4}`,borderColor:"transparent"}}},"",""),children:["prev"===e&&(r??(0,A.Y)(l.irw,{})),t??p(`steps.${"next"===e?"next":"back"}-button-label`),"next"===e&&(r??(0,A.Y)(l.fOo,{css:Ee})),h&&!n&&(0,A.Y)("div",{css:(0,s.AH)({position:"absolute",top:-24,left:-6,padding:2,borderRadius:4,backgroundColor:g.lm.neutral05},"",""),children:(0,A.Y)(De,{shortcut:f})})]});return u?(0,A.FD)(o.K1,{placement:"top-end",open:b,onClose:()=>x(!1),ariaRole:"menu",arrowSize:8,viewPortMargin:12,borderRadius:8,distance:6,children:[(0,A.Y)(o.vh,{children:y}),(0,A.Y)(o.DE,{backgroundColor:m?g.lm.neutral15:g.lm.neutral05,borderWidth:m?1:0,padding:0,shadowBlur:8,children:(0,A.Y)("ul",{css:He,children:u?.map((e,t)=>{const r={display:"flex",gap:16,alignItems:"center",width:"100%",minWidth:160,padding:12,color:g.lm.neutral80,cursor:"pointer",textDecoration:"none",...(0,g.Y$)({inset:!0}),"& > svg":{maxHeight:23,fontSize:23,color:g.lm.neutral60,width:24,strokeWidth:2,"& > path":{strokeWidth:"inherit"}},":hover, :focus":{backgroundColor:g.lm.neutral10,color:"inherit"}};return(0,A.Y)("li",{css:(0,s.AH)({":first-of-type > *":{borderRadius:"8px 8px 0 0"},":last-of-type> *":{borderRadius:"0 0 8px 8px"},":not(:first-of-type)":{borderTop:`1px solid ${g.lm.neutral30}`}},"",""),children:"href"in e?(0,A.FD)("a",{role:"button",href:e.href,css:r,onKeyDown:t=>{" "===t.key&&(t.preventDefault(),window.location.href=e.href)},children:[e.icon,e.label]}):(0,A.FD)(o.b1,{onClick:e.onClick,css:r,children:[e.icon,e.label]})},t)})})})]}):y};var Te={name:"1rx5t2m",styles:"flex:1;min-width:var(--min-page-width);display:flex;flex-direction:column;gap:12px;padding:12px;@media (min-width: 500px) and (min-height: 500px){gap:16px;padding:24px;}"},Le={name:"xd9hir",styles:"flex:1;display:flex;flex-direction:column;justify-content:center;position:relative"},Be={name:"1tn9h3w",styles:"display:flex;justify-content:end;align-items:end;gap:8px;min-height:42px"};const Oe=({title:e,note:t,nextButton:r,prevButton:n,children:i})=>(0,A.FD)("div",{css:Te,children:[(0,A.FD)("div",{children:[(0,A.Y)("h1",{"aria-live":"polite",css:(0,s.AH)({textAlign:"center",fontSize:32,fontWeight:700,color:g.lm.neutral70,"@media screen and (max-width: 600px), screen and (max-height: 400px)":{fontSize:26}},"",""),children:e}),t&&(0,A.Y)("div",{css:(0,s.AH)({fontSize:14,color:g.lm.neutral60,textAlign:"center",lineHeight:1.3,maxWidth:"100ch",margin:"0 auto"},"",""),children:t})]}),(0,A.Y)("div",{css:Le,children:i}),(0,A.FD)("div",{css:Be,children:[n&&(0,A.Y)(Fe,{kind:"prev",...n}),r&&(0,A.Y)(Fe,{kind:"next",...r})]})]});var ze={name:"1b63svt",styles:"font-size:18px;font-weight:700"},Ue={name:"1m1e1pd",styles:"height:1lh;font-size:14px;margin-top:4px"},Ie={name:"1v2iei1",styles:"position:absolute;right:8px;bottom:8px"};const Pe=({icon:e,label:t,onClick:r,shortcut:n,disabledText:i,ariaLabel:a})=>{const{isHighContrast:l}=(0,o.Ut)();return(0,A.FD)(o.b1,{onClick:r,disabled:!!i,"aria-label":a,css:(0,s.AH)({position:"relative",display:"inline-flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",maxHeight:250,maxWidth:420,padding:12,flex:"1",backgroundColor:g.lm.neutral05,color:g.lm.accent7,borderRadius:8,border:`1px solid ${g.lm.neutral20}`,"&[disabled]":{backgroundColor:g.lm.neutral10,color:g.lm.neutral50,borderColor:g.lm.neutral15},"&:not([disabled]):hover, &:not([disabled]):focus-visible":{color:g.lm.accent8,borderColor:g.lm.neutral30,boxShadow:"0 0 16px var(--shadow-color)",...l&&{outline:`2px solid ${g.lm.accent4}`,borderColor:"transparent",boxShadow:"none"}},...(0,g.Y$)({offset:-1})},"",""),children:[(0,A.Y)("div",{css:(0,s.AH)({borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:40,width:80,height:80,backgroundColor:g.lm.neutral10,marginBottom:8},"",""),children:e}),(0,A.Y)("div",{css:ze,children:t}),(0,A.Y)("div",{css:Ue,children:i}),n&&(0,A.Y)("div",{css:Ie,children:(0,A.Y)(De,{shortcut:n})})]})},$e=({setActiveSource:e,userConstraints:t,displayConstraints:r})=>{const{t:n}=(0,d.Bd)(),i=(0,O.t0)(),a=(0,v.wA)(),c=(0,v.pv)(),{displaySupported:u,userSupported:p}=c,h=async()=>{e("user"),await w(a,i,t),await(0,g.GG)(a)},m=async()=>{e("display"),await x(a,i,r)},f=async()=>{e("both"),(0,g.q4)()?(await x(a,i,r),await w(a,i,t),await(0,g.GG)(a)):(await w(a,i,t),await Promise.all([(0,g.GG)(a),x(a,i,r)]))};Se(ye.videoSetup.selectScreen,m),Se(ye.videoSetup.selectBoth,f),Se(ye.videoSetup.selectUser,h);const b=Ce();return u||p?(0,A.FD)("div",{css:(0,s.AH)({display:"flex",gap:24,padding:8,justifyContent:"center",alignItems:"center",flex:"1",[(0,o.pi)(g.LO.medium)]:{flexDirection:"column"}},"",""),children:[(u||!(0,g.kh)())&&(0,A.Y)(Pe,{label:n("sources-scenario-display"),ariaLabel:n("steps.video.share-display"),icon:(0,A.Y)(l.ufi,{}),onClick:m,disabledText:!u&&n("steps.video.display-not-supported"),shortcut:b?ye.videoSetup.selectScreen:void 0}),(u||!(0,g.kh)())&&p&&(0,A.Y)(Pe,{label:n("sources-scenario-display-and-user"),ariaLabel:n("steps.video.share-display-and-user"),icon:(0,A.FD)("div",{css:(0,s.AH)({lineHeight:0,fontSize:"0.8em",svg:{strokeWidth:2.5}},"",""),children:[(0,A.Y)(l.ufi,{}),(0,A.Y)(l.JXP,{})]}),onClick:f,disabledText:u?!c.hasWebcam&&n("steps.video.no-cam-detected"):n("steps.video.display-not-supported"),shortcut:b?ye.videoSetup.selectBoth:void 0}),p&&(0,A.Y)(Pe,{label:n("sources-scenario-user"),ariaLabel:n("steps.video.share-user"),icon:(0,A.Y)(l.JXP,{}),onClick:h,disabledText:!c.hasWebcam&&n("steps.video.no-cam-detected"),shortcut:b?ye.videoSetup.selectUser:void 0})]}):(0,A.Y)(B,{body:n("steps.video.none-available")})},Me=({goToNextStep:e})=>{const{t:t}=(0,d.Bd)(),r=(0,v.wA)(),n=(0,v.pv)(),{displayStream:i,userStream:s,videoChoice:a}=n,l=!!i||!!s,c=e=>r({type:"CHOOSE_VIDEO",choice:e}),u={isDesktop:!1,stream:s,allowed:n.userAllowed,unexpectedEnd:n.userUnexpectedEnd},p={isDesktop:!0,stream:i,allowed:n.displayAllowed,unexpectedEnd:n.displayUnexpectedEnd},h={prevButton:{onClick:()=>{c("none"),k(s,r),Y(i,r)},disabled:!1,label:t("steps.video.reselect-source")},nextButton:{onClick:()=>e(),disabled:"both"===a?!i||!s:!l}},m=!1===n.userAllowed||n.userUnexpectedEnd||!1===n.displayAllowed||n.displayUnexpectedEnd;return(0,o.YW)(a,{none:()=>(0,A.FD)(Oe,{title:t("steps.video.question"),children:[(0,A.Y)(je,{}),(0,A.Y)($e,{displayConstraints:U(N()),userConstraints:U(q()),setActiveSource:c})]}),user:()=>{const e=s||m;return(0,A.Y)(Oe,{title:t("steps.video.user-selected"),...e&&h,children:(0,A.Y)(oe,{inputs:[u]})})},display:()=>{const e=i||m;return(0,A.Y)(Oe,{title:t("steps.video.display-selected"),...e&&h,children:(0,A.Y)(oe,{inputs:[p]})})},both:()=>{const e=s&&i||m;return(0,A.Y)(Oe,{title:t("steps.video.display-and-user-selected"),...e&&h,children:(0,A.Y)(oe,{inputs:[p,u]})})}})},je=()=>{const{t:e}=(0,d.Bd)(),t=[];if("https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname&&t.push((0,A.Y)(B,{body:e("warning-https")})),!(0,g.oC)()){let r=e("warning-recorder-not-supported");(0,g.q4)()&&(r+=" "+e("warning-recorder-safari-hint")),t.push((0,A.Y)(B,{body:r}))}return t.length>0?(0,A.Y)("div",{children:t}):null},_e=({selectNoAudio:e,selectMicrophone:t})=>{const{t:r}=(0,d.Bd)(),n=Ce();return Se(ye.audioSetup.withAudio,t),Se(ye.audioSetup.withoutAudio,e),(0,A.FD)("div",{css:(0,s.AH)({display:"flex",gap:24,padding:8,justifyContent:"center",alignItems:"center",flex:"1",[(0,o.pi)(g.LO.medium)]:{flexDirection:"column"}},"",""),children:[(0,A.Y)(Pe,{icon:(0,A.Y)(l.Rrl,{}),label:r("steps.audio.microphone"),onClick:t,shortcut:n?ye.audioSetup.withAudio:void 0}),(0,A.Y)(Pe,{icon:(0,A.Y)(l.Qnk,{}),label:r("steps.audio.without-audio"),onClick:e,shortcut:n?ye.audioSetup.withoutAudio:void 0})]})};var We=r(9432),qe=r.n(We),Ne={name:"nqgbks",styles:"display:flex;width:80%;min-width:240px;align-items:center"},Ke={name:"102h2op",styles:"flex:1 1;min-width:50px"};const Ge=()=>{const{t:e}=(0,d.Bd)(),{isHighContrast:t}=(0,o.Ut)(),r=(0,v.wA)(),n=(0,v.pv)(),{audioStream:i,audioAllowed:l,audioUnexpectedEnd:c}=n,u=i?.getAudioTracks()?.[0]?.getSettings()?.deviceId,p=(0,g.r_)(n.mediaDevices,"audioinput");(0,a.useEffect)(()=>{u&&window.localStorage.setItem(Ze,u)});const h=(0,a.useId)();let m=(0,A.Y)(A.FK,{});return m=i?(0,A.FD)(A.FK,{children:[(0,A.Y)(Xe,{stream:i}),(0,A.FD)("div",{css:Ne,children:[(0,A.Y)("label",{htmlFor:h,css:(0,s.AH)({marginRight:16,display:"flex",flexDirection:"column",alignItems:"center",fontWeight:700,color:g.lm.neutral70},"",""),children:e("steps.audio.device")}),(0,A.Y)(z,{id:h,value:u,onChange:e=>(async e=>{i&&y(i,r),await b(r,{exact:e})})(e.target.value),css:Ke,children:p.map((e,t)=>(0,A.Y)("option",{value:e.deviceId,children:e.label??"unlabeled microphone"},t))})]})]}):!1===l?(0,A.Y)(B,{title:e("steps.audio.not-allowed-title"),body:e("steps.audio.not-allowed-text")}):!0===c?(0,A.Y)(B,{body:e("error-lost-audio-stream")}):(0,A.Y)(o.y$,{size:75}),(0,A.Y)("div",{css:(0,s.AH)({maxWidth:850,backgroundColor:g.lm.neutral05,borderRadius:16,boxShadow:t?"none":"0 4px 16px var(--shadow-color)",width:"100%",margin:"0 auto",padding:24,display:"flex",flexDirection:"column",alignItems:"center",maxHeight:"400px",gap:16},"",""),children:m})};var Ve={name:"1xnwbsu",styles:"width:100%;height:min(200px, 20vh);flex:1 0 70px"};const Xe=({stream:e})=>{const t="dark"===(0,o.Ut)().scheme,r=(0,a.useRef)(null);return(0,a.useEffect)(()=>{const n=r.current;if(n){const r=n.getContext("2d");if(null==r)throw new Error("Could not get 2D context for canvas");r.lineWidth=2,r.strokeStyle=t?"#f1c40f":"#044a81";const i=(new window.AudioContext).createMediaStreamSource(e),o=new(qe())(i,{fftSize:1024});return o.animate(r),()=>o.stop()}return()=>{}},[e,t]),(0,A.Y)("canvas",{ref:r,width:"800px",height:"200px",css:Ve})},Ze="ocStudioLastAudioDevice",Qe=({goToNextStep:e,goToPrevStep:t})=>{const{t:r}=(0,d.Bd)(),n=(0,v.wA)(),{audioStream:i,audioChoice:s}=(0,v.pv)();return(0,o.YW)(s,{none:()=>(0,A.Y)(Oe,{title:r("steps.audio.question"),prevButton:{onClick:t},nextButton:{disabled:!0},children:(0,A.Y)(_e,{selectNoAudio:e,selectMicrophone:async()=>{n({type:"CHOOSE_AUDIO",choice:"microphone"});const e=window.localStorage.getItem(Ze);await b(n,e?{ideal:e}:void 0),await(0,g.GG)(n)}})}),microphone:()=>(0,A.Y)(Oe,{title:r("steps.audio.microphone-selected"),prevButton:{label:r("steps.audio.reselect-audio"),onClick:()=>{i&&y(i,n),n({type:"CHOOSE_AUDIO",choice:"none"})}},nextButton:{disabled:!i,onClick:e},children:(0,A.Y)(Ge,{})})})};var Je=r(4631),et={name:"158icaa",styles:"margin-left:4px"};const tt=({recordingState:e,startRecording:t,pauseRecording:r,resumeRecording:n})=>{const{t:i}=(0,d.Bd)(),a="light"===(0,o.Ut)().scheme,{isHighContrast:c}=(0,o.Ut)(),u=a?g.lm.neutral05:g.lm.neutral90,p=Ce();Se(ye.recording.startPauseResume,()=>{(0,o.YW)(e,{inactive:()=>t(),paused:()=>n(),recording:()=>r()})},{ignoreEventWhen:e=>"Space"===e.code&&e.target instanceof HTMLButtonElement},[e]);const h=(0,o.YW)(e,{inactive:()=>i("steps.record.record-button-title"),paused:()=>i("steps.record.resume-button-title"),recording:()=>i("steps.record.pause-button-title")});return(0,A.FD)("div",{css:(0,s.AH)({margin:"0 auto",width:180,height:85,display:"flex",gap:32,alignItems:"center",justifyContent:"center",backgroundColor:a?g.lm.neutral70:g.lm.neutral05,border:`1px solid ${a?g.lm.neutral50:g.lm.neutral25}`,boxShadow:c?"none":"0 4px 16px rgba(0, 0, 0, 0.2)",borderRadius:12,color:u,...c&&{backgroundColor:g.lm.neutral05,border:`2px solid ${g.lm.neutral25}`}},"",""),children:[(0,A.Y)(o.kR,{tooltip:h,children:(0,A.FD)("button",{onClick:(0,o.YW)(e,{inactive:()=>t,paused:()=>n,recording:()=>r}),"aria-label":h,"aria-live":"polite",css:(0,s.AH)({position:"relative",width:50,height:50,display:"flex",justifyContent:"center",alignItems:"center",fontSize:28,padding:0,boxShadow:c?"none":"0 4px 4px rgba(0, 0, 0, 0.12)",cursor:"pointer",color:c||a?"white":"#D6D6D6",borderRadius:"50%",backgroundColor:a?"#E42D43":"#b8012d",border:`${c?"2px":"1px"} solid ${u}`,":hover, :focus-visible":{backgroundColor:a?"#c40a31":"#8f0121"},":focus-visible":{outline:`4px solid ${u}`}},"",""),children:[(0,o.YW)(e,{inactive:()=>null,paused:()=>(0,A.Y)(l.aze,{css:et}),recording:()=>(0,A.Y)(l.GHw,{})}),p&&(0,A.Y)("div",{css:(0,s.AH)({position:"absolute",right:-4,bottom:-4},"",""),children:(0,A.Y)(De,{shortcut:ye.recording.startPauseResume.split(";")[0]})})]})}),(0,A.Y)(rt,{isRecording:"recording"===e})]})},rt=({isRecording:e})=>{const[t,r]=(0,a.useState)("00:00"),n=(0,a.useRef)(0);return(0,a.useEffect)(()=>{let t=new Date;const i=setInterval(()=>{const i=new Date;if(e){n.current+=i.valueOf()-t.valueOf();const e=n.current;let o=[Math.floor(e/36e5),Math.floor(e/6e4)%60,Math.floor(e/1e3)%60];0===o[0]&&(o=o.slice(1)),r(o.map(e=>(e<10?"0":"")+e).join(":"))}t=i},100);return()=>clearInterval(i)},[e]),(0,A.Y)("div",{children:t})};var nt=r(3537),it=r.n(nt);class ot{#e;#t=[];#r;onStop;constructor(e,t,r){let n;"isTypeSupported"in MediaRecorder?(n=(t?.mimes||[]).find(e=>MediaRecorder.isTypeSupported(e)),n?console.debug("using first supported MIME type from settings: ",n):t?.mimes&&console.debug("None of the MIME types specified in settings are supported by this `MediaRecorder`")):t?.mimes&&console.debug("MIME types were specified, but `MediaRecorder.isTypeSupported` is not supported by your browser"),this.#n(),this.#r=(0,g.VM)(e),this.onStop=r;const i=t?.videoBitrate;this.#e=new MediaRecorder(e,{mimeType:n,videoBitsPerSecond:i}),this.#e.ondataavailable=this.#i,this.#e.onstop=this.#o}#n=()=>{this.#t=[]};#i=e=>{e.data.size>0?this.#t.push(e.data):console.log("Recording data has size 0!",e)};#o=async e=>{const t=this.#t[0]?.type||this.#e.mimeType,r=t.split(";")[0].trim();let n;n=["video/webm","video/x-matroska"].includes(r)?await it()(new Blob(this.#t,{type:t})):new Blob(this.#t,{type:t});const i=URL.createObjectURL(n);this.#n(),this.onStop?.({url:i,media:n,mimeType:t,dimensions:this.#r})};start(){this.#e.start()}pause(){this.#e.pause()}resume(){this.#e.resume()}stop(){this.#e.stop()}}const st=(e,t)=>({media:r,url:n,mimeType:i,dimensions:o})=>{e({type:"ADD_RECORDING",recording:{deviceType:t,media:r,url:n,mimeType:i,dimensions:o}})},at=(e,t)=>e.reduce((e,t)=>t?.getAudioTracks().length?new MediaStream([...e.getVideoTracks(),...(e.getAudioTracks().length?(()=>{const r=new AudioContext,n=r.createMediaStreamSource(e),i=r.createMediaStreamSource(t),o=r.createMediaStreamDestination();return n.connect(o),i.connect(o),o.stream})():t).getAudioTracks()]):e,t);var lt={name:"1co8040",styles:"position:absolute;bottom:32px;width:100%"};const dt=({goToNextStep:e,goToPrevStep:t})=>{const{t:r}=(0,d.Bd)(),n=(0,v.wA)(),i=(0,Je.Z1)(),s=(0,v.wA)(),l=(0,O.t0)(),c=(0,v.pv)(),{displayStream:u,userStream:p,displayUnexpectedEnd:h,userUnexpectedEnd:m,audioUnexpectedEnd:f}=c,[b,x]=(0,a.useState)("inactive"),w=(0,a.useRef)(null),S=(0,a.useRef)(null),C=(u||p)&&!m&&!h&&!f,D=t=>{w.current?.stop(),S.current?.stop(),s({type:t?"STOP_RECORDING_PREMATURELY":"STOP_RECORDING"}),i.refreshConnection(),function({audioStream:e,displayStream:t,userStream:r},n){y(e,n),Y(t,n),k(r,n)}(c,n),e()};(0,a.useEffect)(()=>{!(m||h||f)||"recording"!==b&&"paused"!==b||D(!0)});const R="paused"===b,E=[];return(u||h)&&E.push({body:(0,A.Y)(pt,{stream:u,paused:R}),dimensions:()=>(0,g.VM)(u),autoSize:!u}),(p||m)&&E.push({body:(0,A.Y)(pt,{stream:p,paused:R}),dimensions:()=>(0,g.VM)(p),autoSize:!p}),(0,o.js)("inactive"!==b),(0,A.FD)(Oe,{title:r("steps.record.label"),prevButton:{onClick:t,disabled:"inactive"!==b},nextButton:{onClick:()=>D(!1),disabled:"paused"!==b,label:r("steps.record.stop-button-title")},children:[f&&(0,A.Y)(B,{body:r("error-lost-audio-stream")}),(0,A.Y)(H,{gap:20,children:E}),(0,A.Y)("div",{css:lt,children:C&&(0,A.Y)(tt,{startRecording:()=>{if(s({type:"CLEAR_RECORDINGS"}),u){const e=st(s,"desktop"),t=at([c.audioStream],u);w.current=new ot(t,l.recording,e),w.current.start()}if(p){const e=st(s,"video"),t=at([c.audioStream,u],p);S.current=new ot(t,l.recording,e),S.current.start()}x("recording"),s({type:"START_RECORDING"})},pauseRecording:()=>{x("paused"),w.current?.pause(),S.current?.pause()},resumeRecording:()=>{x("recording"),w.current?.resume(),S.current?.resume()},recordingState:b})})]})};var ct={name:"ti75j2",styles:"margin:0"},ut={name:"1ujvmfg",styles:"outline:none;width:100%;height:100%;background:transparent"};const pt=({stream:e,paused:t})=>{const{t:r}=(0,d.Bd)(),n=E(),i=(0,a.useRef)(null),{isHighContrast:l}=(0,o.Ut)();return(0,a.useEffect)(()=>{const r=i.current;if(r&&e)return r.srcObject||(r.srcObject=e),r.addEventListener("resize",n),t?r.pause():r.play(),()=>r.removeEventListener("resize",n)}),e?(0,A.FD)("div",{css:(0,s.AH)({position:"relative",boxShadow:l?"none":"0 2px 12px rgba(0, 0, 0, 0.35)",overflow:"hidden",height:"100%"},"",""),children:[t&&(0,A.Y)(gt,{}),(0,A.Y)("video",{ref:i,autoPlay:!0,muted:!0,playsInline:!0,tabIndex:-1,css:ut})]}):(0,A.Y)(B,{css:ct,body:r("error-lost-video-stream")})};var ht={name:"1b4lm15",styles:"position:absolute;width:100%;height:100%;background-color:rgba(50, 50, 50, 0.7)"},mt={name:"4t4ja4",styles:"font-size:26px"};const gt=()=>{const{t:e}=(0,d.Bd)();return(0,A.Y)("div",{css:ht,children:(0,A.FD)("div",{css:(0,s.AH)({display:"flex",alignItems:"center",justifyContent:"center",color:"white",gap:8,fontSize:20,marginTop:32,textShadow:"0 0 12px rgba(0, 0, 0, 0.6)",animation:`2s ease-in-out infinite none ${(0,s.i7)({"0%":{opacity:1},"50%":{opacity:.7},"100%":{opacity:1}})}`},"",""),children:[(0,A.Y)(l.IQZ,{css:mt}),e("steps.record.is-paused")]})})};var vt;function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ft.apply(null,arguments)}var bt,xt=e=>a.createElement("svg",ft({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 100 90",width:"1em",height:"1em"},e),vt||(vt=a.createElement("g",{fill:"currentColor"},a.createElement("path",{d:"M49.7.002c-2.91.059-5.75 1.49-7.44 4.08a8.84 8.84 0 0 0-1.42 5.29c-.08.122-.986 1.51-1.13 1.72-.13-.2-.997-1.54-1.08-1.66a8.84 8.84 0 0 0-1.4-5.29c-1.68-2.59-4.51-4.04-7.42-4.11a9.03 9.03 0 0 0-5.09 1.41c-4.18 2.66-5.4 8.27-2.72 12.4 2.56 3.96 7.83 5.24 11.9 3.02l.992 1.53c-2.84 4.35-4.9 7.5-6.74 10.3-3.09 4.73-1.94 8.93 2.01 11.5l9.47-14.5 9.45 14.6c3.96-2.55 5.13-6.75 2.06-11.5-1.84-2.84-3.9-6.03-6.74-10.4l1.04-1.59c4.1 2.23 9.37.974 12-2.97 2.03-3.1 1.85-7.03-.114-9.93a8.9 8.9 0 0 0-2.55-2.49 8.94 8.94 0 0 0-5.08-1.43zm.09 5.96a3.04 3.04 0 0 1 1.7.499c.357.23.65.514.872.835.668.962.712 2.24.018 3.31-.926 1.42-2.74 1.8-4.17.882-1.43-.92-1.82-2.73-.89-4.14.58-.886 1.51-1.37 2.47-1.38zm-20.1.023c.963.017 1.89.504 2.46 1.39.92 1.42.525 3.22-.906 4.14s-3.25.521-4.17-.9c-.92-1.42-.525-3.22.906-4.14a3.07 3.07 0 0 1 1.71-.492zm10 24.1a1.83 1.81 0 0 0-1.83 1.81v3.62a1.83 1.81 0 0 0 1.83 1.81 1.83 1.81 0 0 0 1.83-1.81v-3.62a1.83 1.81 0 0 0-1.83-1.81m0 10.9a1.83 1.81 0 0 0-1.83 1.81v3.62a1.83 1.81 0 0 0 1.83 1.81 1.83 1.81 0 0 0 1.83-1.81v-3.62a1.83 1.81 0 0 0-1.83-1.81m-1.5 8.8a2.43 2.42 0 0 0-2.43 2.42v35.4a2.43 2.42 0 0 0 2.43 2.42h8.94v-4.83h-6.51v-30.6h6.1v-4.83zm6.51 8.86v22.5h55.2v-4.83h-3.22a1.71 1.71 0 0 1-1.72-1.71v-9.47c0-.946.767-1.71 1.72-1.71h3.22v-4.83zm6.59 4.83h14.4c.954 0 1.72.762 1.72 1.71v9.47c0 .946-.767 1.71-1.72 1.71h-14.4a1.71 1.71 0 0 1-1.72-1.71v-9.47c0-.946.767-1.71 1.72-1.71m22.7 0h14.4c.954 0 1.72.762 1.72 1.71v9.47c0 .946-.767 1.71-1.72 1.71h-14.4a1.71 1.71 0 0 1-1.72-1.71v-9.47c0-.946.77-1.71 1.72-1.71"}),a.createElement("path",{d:"M0 58.6v4.83h2.44c.954 0 1.72.762 1.72 1.71v9.47c0 .946-.768 1.71-1.72 1.71H0v4.83h31.8v-22.5zm10.8 4.83h14.4c.954 0 1.72.762 1.72 1.71v9.47c0 .946-.768 1.71-1.72 1.71H10.8a1.71 1.71 0 0 1-1.72-1.71v-9.47c0-.946.768-1.71 1.72-1.71",opacity:.2}))));function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wt.apply(null,arguments)}var yt=e=>a.createElement("svg",wt({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),bt||(bt=a.createElement("path",{d:"M14 21h-4V3h4"})));const Yt=({previewController:e,currentTime:t})=>{const{i18n:r}=(0,d.Bd)(),n=e.current?.duration,{isHighContrast:i}=(0,o.Ut)();return(0,A.FD)("div",{css:(0,s.AH)({backgroundColor:g.lm.neutral05,borderRadius:8,padding:16,boxShadow:i?"none":"0 4px 4px var(--shadow-color)",display:"flex",flexDirection:"column",gap:12},"",""),children:[(0,A.Y)(Ht,{previewController:e,currentTime:t}),(0,A.FD)("div",{css:(0,s.AH)({textAlign:"center",color:g.lm.neutral70},"",""),children:[kt(t,n,r.language),"/",kt(n,n,r.language)]}),(0,A.Y)(Ct,{previewController:e,currentTime:t})]})},kt=(e,t,r)=>{if(void 0===e)return"--:--";const n=e%60,i=Math.floor(e/60)%60,o=Math.floor(e/3600),s=n.toLocaleString(r,{minimumFractionDigits:1,maximumFractionDigits:1}),a=`${i<=9?"0":""}${i}:${n<=9?"0":""}${s}`;return t&&t>=3600?`${o}:${a}`:a};var St={name:"1r962iv",styles:"padding:4px"};const Ct=({previewController:e,currentTime:t})=>{const r=e.current?.duration||1/0,n=(0,O.t0)(),i=(0,v.wA)(),{start:l,end:d}=(0,v.pv)(),c=(0,a.useRef)(null),{isHighContrast:u}=(0,o.Ut)(),p={position:"absolute",backgroundColor:g.lm.danger1,height:"var(--scrubber-height)",borderRadius:"var(--scrubber-border-radius)",boxSizing:"content-box",background:`repeating-linear-gradient(45deg,${g.lm.danger2}, ${g.lm.danger2} 4px,${g.lm.danger1} 4px, ${g.lm.danger1} 8px)`};return(0,A.Y)("div",{css:St,children:(0,A.FD)("div",{ref:c,css:(0,s.AH)({"--scrubber-border-radius":"3px","--scrubber-height":"6px","@media not (any-pointer: fine)":{"--scrubber-border-radius":"6px","--scrubber-height":"12px"},position:"relative",backgroundColor:g.lm.accent4,width:"100%",height:"var(--scrubber-height)",borderRadius:"var(--scrubber-border-radius)"},"",""),children:[(0,A.Y)("div",{onClick:t=>(t=>{const n=t.currentTarget.getBoundingClientRect();let i=(t.clientX-n.x)/n.width;i<0?i=0:i>1&&(i=1),e.current&&(e.current.currentTime=i*r)})(t),css:(0,s.AH)({position:"absolute",width:"100%",cursor:"pointer",zIndex:5,top:-6,bottom:-6},"",""),children:(0,A.Y)(At,{scrubberRef:c,previewController:e,initialTime:t,onDrag:t=>(0,o.d6)(e.current).currentTime=t,children:(0,A.Y)("div",{css:(0,s.AH)({width:16,height:16,"@media not (any-pointer: fine)":{width:24,height:24},borderRadius:"50%",backgroundColor:g.lm.neutral05,border:`1px solid ${g.lm.neutral40}`},"","")})})}),null!=l&&l>0&&(0,A.Y)("div",{css:(0,s.AH)({left:0,borderRight:"2px solid black",width:l/r*100+"%",...p},"","")}),null!=d&&d<r&&(0,A.Y)("div",{css:(0,s.AH)({right:0,borderLeft:"2px solid black",width:(r-d)/r*100+"%",...p,backgroundPosition:"right",backgroundSize:"100vw"},"","")}),n.review?.disableCutting||(0,A.FD)(A.FK,{children:[(0,A.Y)(At,{scrubberRef:c,previewController:e,initialTime:l??0,clamp:e=>Math.min(e,d??r),onDrag:e=>i({type:"UPDATE_START",time:e}),children:(0,A.Y)(Dt,{side:"left",isHighContrast:u})}),(0,A.Y)(At,{scrubberRef:c,previewController:e,initialTime:d??r,clamp:e=>Math.max(e,l??0),onDrag:e=>i({type:"UPDATE_END",time:e}),children:(0,A.Y)(Dt,{side:"right",isHighContrast:u})})]}),(0,A.Y)("div",{css:(0,s.AH)({position:"absolute",left:0,width:t/r*100+"%",backdropFilter:"brightness(0.75)",height:"var(--scrubber-height)",borderRadius:"var(--scrubber-border-radius)"},"","")})]})})},Dt=({side:e,isHighContrast:t})=>(0,A.Y)("div",{css:(0,s.AH)({width:14,height:20,"@media not (any-pointer: fine)":{height:24},backgroundColor:g.lm.neutral05,color:g.lm.neutral70,border:`1px solid ${g.lm.neutral40}`,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:t?"none":"0 1px 2px var(--shadow-color)"},"",""),children:(0,A.Y)(yt,{css:(0,s.AH)({transform:"scale(1.2) "+("right"==e?"scaleX(-1)":"")},"","")})}),At=({previewController:e,scrubberRef:t,initialTime:r,onDrag:n,clamp:i=e=>e,children:l})=>{const d=e.current?.duration||1/0,c=r/d,u=(0,a.useRef)(c),p=(0,a.useRef)(null),h=(0,a.useRef)(null),m=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{const e=()=>{m.current&&(m.current=!1,n?.(u.current*d),(0,o.d6)(h.current).style.left="")},t=e=>{r(e.pageX)},r=e=>{if(m.current){const t=(0,o.d6)(p.current),r=Math.min(1,Math.max(0,(e-t.left)/t.width));u.current=i(d*r)/d,n?.(u.current*d),(0,o.d6)(h.current).style.left=100*u.current+"%"}},s=e=>{e.touches.length>0&&r(e.touches[0].pageX)};return document.addEventListener("mouseup",e),document.addEventListener("touchend",e),document.addEventListener("mousemove",t),document.addEventListener("touchmove",s),()=>{document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e),document.removeEventListener("mousemove",t),document.removeEventListener("touchmove",s)}}),(0,A.Y)("div",{ref:h,onMouseDown:()=>{m.current=!0,p.current=(0,o.d6)(t.current).getBoundingClientRect()},onTouchStart:()=>{console.log("TOUCH START"),m.current=!0,p.current=(0,o.d6)(t.current).getBoundingClientRect()},css:(0,s.AH)({position:"absolute",zIndex:10,left:100*c+"%",cursor:"grab",userSelect:"none",top:"50%",transform:"translateY(-50%) translateX(-50%)",padding:"8px 4px"},"",""),children:l})};var Rt={name:"r8hnng",styles:"display:flex;gap:16px;justify-content:center;align-items:flex-end"},Et={name:"1i7v2bx",styles:"margin-left:3px"};const Ht=({currentTime:e,previewController:t})=>{const{start:r,end:n}=(0,v.pv)(),i=(0,v.wA)(),a=(0,O.t0)(),{t:c}=(0,d.Bd)(),u=()=>{const e=t.current;e&&(e.isPlaying?e.pause():e.isReadyToPlay&&e.play())};Se(ye.review.playPause,u,{ignoreEventWhen:e=>"Space"===e.code&&e.target instanceof HTMLButtonElement});const p=Ce(),{isHighContrast:h}=(0,o.Ut)(),m=t.current?.isPlaying,f=c("steps.review."+(m?"pause":"play"));return(0,A.FD)("div",{css:Rt,children:[a.review?.disableCutting||(0,A.Y)(Ft,{marker:"start",value:r,control:n,invariant:(e,t)=>e<t,recordingDispatch:i,previewController:t,currentTime:e}),(0,A.Y)(o.kR,{tooltip:f,children:(0,A.FD)(o.b1,{"aria-label":f,css:(0,s.AH)({backgroundColor:g.lm.accent5,color:h?g.lm.neutral05:"white",border:"none",borderRadius:"50%",width:48,height:48,display:"flex",justifyContent:"center",alignItems:"center",fontSize:24,...(0,g.Y$)({offset:1}),"&:hover, :focus-visible":{backgroundColor:g.lm.accent6,...h&&{backgroundColor:g.lm.neutral05,outline:`2px solid ${g.lm.accent4}`,color:g.lm.accent4}}},"",""),onClick:u,onMouseDown:e=>e.preventDefault(),children:[p&&(0,A.Y)("div",{css:(0,s.AH)({position:"absolute",bottom:-20,padding:2,borderRadius:4,backgroundColor:g.lm.neutral05},"",""),children:(0,A.Y)(De,{shortcut:ye.review.playPause.split(";")[0]})}),m?(0,A.Y)(l.GHw,{}):(0,A.Y)(l.aze,{css:Et})]})}),a.review?.disableCutting||(0,A.Y)(Ft,{marker:"end",value:n,control:r,invariant:(e,t)=>t<e,recordingDispatch:i,previewController:t,currentTime:e})]})},Ft=({marker:e,value:t,control:r,invariant:n,currentTime:i,previewController:a,recordingDispatch:l})=>{const{t:c,i18n:u}=(0,d.Bd)(),{isHighContrast:p}=(0,o.Ut)(),h=i<=$t||a.current&&i>=a.current.duration||null!=r&&!n(i,r),m=()=>{if(!a.current)return;let t=a.current.currentTime;null==r||n(t,r)||(t=r),l({type:"start"===e?"UPDATE_START":"UPDATE_END",time:t})},v=ye.review["start"===e?"cutLeft":"cutRight"];Se(v,m,{enabled:!h}),Se(ye.review["start"===e?"removeCutLeft":"removeCutRight"],()=>l({type:"start"===e?"UPDATE_START":"UPDATE_END",time:null}));const f=Ce(),b=(0,A.Y)("div",{css:(0,s.AH)({minWidth:68,textAlign:"start"==e?"right":"left"},"",""),children:null!==t&&(0,A.Y)(o.kR,{tooltip:c("steps.review.jump-to-cut-point"),children:(0,A.Y)(o.b1,{css:(0,s.AH)({padding:"4px 0",color:g.lm.accent6},"",""),onClick:e=>{e.preventDefault(),a.current&&(a.current.currentTime=t)},onMouseDown:e=>e.preventDefault(),children:kt(t,t,u.language)})})}),x=(0,A.Y)(o.kR,{tooltip:c(`steps.review.set-${e}`),children:(0,A.FD)(o.b1,{disabled:h,"aria-label":c(`steps.review.set-${e}`),onClick:m,onMouseDown:e=>e.preventDefault(),css:(0,s.AH)({lineHeight:0,padding:"4px 8px",paddingTop:4,borderRadius:4,...(0,g.Y$)(),"&:disabled":{opacity:.3},"&:not(:disabled):hover":{backgroundColor:g.lm.neutral10,color:p?g.lm.accent4:"inherit"}},"",""),children:[(0,A.Y)(xt,{css:(0,s.AH)({height:36,width:36,transform:"end"===e?"scaleX(-1)":""},"","")}),f&&!h&&(0,A.Y)("div",{css:(0,s.AH)({position:"absolute",bottom:-20,padding:2,borderRadius:4,backgroundColor:g.lm.neutral05},"",""),children:(0,A.Y)(De,{shortcut:v})})]})});return"start"===e?(0,A.FD)(A.FK,{children:[b,x]}):(0,A.FD)(A.FK,{children:[x,b]})};var Tt;function Lt(){return Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lt.apply(null,arguments)}var Bt=e=>a.createElement("svg",Lt({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",viewBox:"0 0 100 65",width:"1em",height:"1em"},e),Tt||(Tt=a.createElement("path",{fill:"currentColor",d:"M24.6 0c-.447 0-.894.171-1.24.511l-3.07 3.05a1.73 1.73 0 0 0 0 2.46l58.8 58.5c.685.681 1.79.681 2.47 0l3.07-3.05a1.73 1.73 0 0 0 0-2.46l-6.68-6.64h22v-7.32h-15.6c-1.44 0-2.6-1.15-2.6-2.59v-14.3c0-1.43 1.16-2.59 2.6-2.59h15.6v-7.32h-56.4L25.75.551A1.75 1.75 0 0 0 24.51.04zM0 18.2v7.32h3.7c1.44 0 2.6 1.15 2.6 2.59v14.3C6.3 43.84 5.14 45 3.7 45H0v7.32h55.8l-15.4-15.3v5.36c0 1.43-1.16 2.59-2.6 2.59H16c-1.44 0-2.6-1.15-2.6-2.59v-14.3c0-1.43 1.16-2.59 2.6-2.59h12.8l-7.36-7.32zm51 7.32h21c1.44 0 2.6 1.15 2.6 2.59v14.3c0 1.43-1.16 2.59-2.6 2.59h-1.4z"}))),Ot={name:"zxsb69",styles:"position:relative;width:100%;height:100%"},zt={name:"1j80pbv",styles:"position:absolute;left:0;right:0;top:0;bottom:0;background-color:rgba(0, 0, 0, 0.65);color:white;display:flex;flex-direction:column;align-items:center;justify-content:start;padding-top:16px;pointer-events:none"},Ut={name:"6yeg13",styles:"font-size:3em"},It={name:"te1fbj",styles:"margin:8px 0"};const Pt=(0,a.forwardRef)(({onTimeUpdate:e,onReady:t,onPausePlay:r},n)=>{const{recordings:i,start:l,end:c}=(0,v.pv)(),{t:u}=(0,d.Bd)(),{isHighContrast:p}=(0,o.Ut)(),h=[(0,a.useRef)(null),(0,a.useRef)(null)],m=h.slice(0,i.length),g=(0,a.useRef)(null),f=e=>{m.some(e=>e.current?.seeking)?g.current=e:m.forEach(t=>{t.current&&(t.current.currentTime=Math.max(0,Math.min(e,t.current.duration)))})};(0,a.useImperativeHandle)(n,()=>({get currentTime(){return(0,o.d6)(h[0].current?.currentTime)},set currentTime(e){f(e)},get duration(){return(0,o.d6)(h[0].current?.duration)},get isPlaying(){const e=h[0].current;return null!=e&&e.currentTime>0&&!e.paused&&!e.ended},get isReadyToPlay(){return m.every(e=>(e.current?.readyState??0)>=2)},play(){m.forEach(e=>e.current?.play()),r(!1)},pause(){m.forEach(e=>e.current?.pause()),r(!0)}}));const b=e=>null!==l&&e<l||null!==c&&e>c,x=h[0].current?.currentTime||0,w=b(x),[,y]=(0,a.useState)(w),Y=e=>f((0,o.d6)(h[0].current?.currentTime)+e);Se(ye.review.forwards5secs,()=>Y(5)),Se(ye.review.backwards5secs,()=>Y(-5)),Se(ye.review.forwardsFrame,()=>Y(1/30),{useKey:!0}),Se(ye.review.backwardsFrame,()=>Y(-1/30),{useKey:!0});const k=i.map((r,n)=>({dimensions:()=>r.dimensions,body:(0,A.FD)("div",{css:Ot,children:[w&&(0,A.FD)("div",{css:zt,children:[(0,A.Y)(Bt,{css:Ut}),(0,A.Y)("p",{css:It,children:u("steps.review.part-will-be-removed")})]}),(0,A.Y)("video",{ref:h[n],src:r.url,onLoadedData:()=>t(),onSeeked:()=>{const e=h[0==n?1:0].current?.seeking,t=g.current;e||null==t||(m.forEach(e=>{e.current&&(e.current.currentTime=t)}),g.current=null)},onTimeUpdate:t=>{y(b(t.currentTarget.currentTime)),e(t)},autoPlay:/iPad|iPhone|iPod/.test(navigator.userAgent),playsInline:!0,preload:"auto",tabIndex:-1,css:(0,s.AH)({width:"100%",height:"100%",outline:"none",boxShadow:p?"none":"0 4px 16px var(--shadow-color)",borderRadius:16},"","")},n)]})}));return(0,A.Y)(H,{gap:20,children:k})}),$t=.001;var Mt={name:"sw5ovr",styles:"flex:1;display:flex;align-items:center;justify-content:center;font-size:42px"};const jt=({goToFirstStep:e,goToNextStep:t})=>{const{t:r}=(0,d.Bd)(),n=(0,v.wA)(),{recordings:i,prematureRecordingEnd:c,videoChoice:u}=(0,v.pv)(),p=i.some(e=>0===e.media.size),h=(0,a.useRef)(null),[m,g]=(0,a.useState)(0),[f,b]=(0,a.useState)(!1),[x,w]=(0,a.useState)(!0),y=(0,o.YW)(u,{both:()=>2,display:()=>1,user:()=>1,none:()=>0});return(0,A.FD)(Oe,{title:r("steps.review.label"),note:r("steps.review.only-on-upload-note"),prevButton:{danger:!0,icon:(0,A.Y)(l.Q_v,{}),label:r("steps.review.button-discard-and-record"),onClick:()=>{window.confirm(r("confirm-discard-recordings"))&&(n({type:"RESET"}),e())}},nextButton:{onClick:t},children:[c&&(0,A.Y)(B,{body:r("error-lost-stream-end-recording")}),p&&(0,A.Y)(B,{body:r("steps.review.error-empty-recording")}),(!f||i.length!==y)&&(0,A.Y)("div",{css:Mt,children:(0,A.Y)(o.y$,{})}),i.length===y&&(0,A.FD)("div",{css:(0,s.AH)({display:f?"flex":"none",flex:"1 1 auto",gap:16,flexDirection:"column"},"",""),children:[(0,A.Y)(Pt,{ref:h,onTimeUpdate:e=>{g(e.currentTarget.currentTime)},onPausePlay:e=>w(e),onReady:()=>b(!0)}),(0,A.Y)(Yt,{previewController:h,currentTime:m})]})]})},_t=()=>{const{recordings:e}=(0,v.pv)();return e.map((e,t)=>(0,A.Y)(Xt,{idx:t,recording:e},t))};var Wt={name:"1kr2sal",styles:"display:flex;flex-direction:column;align-items:center;:not(:first-of-type){margin-top:32px;}"},qt={name:"bjn8wh",styles:"position:relative"},Nt={name:"1ojv5ca",styles:"border-radius:4px;display:block;max-height:190px;max-width:100%;margin:0 auto"},Kt={name:"2dzgoj",styles:"position:absolute;bottom:0;right:0;left:0;color:white;background-color:rgba(30, 30, 30, 0.85);display:flex;justify-content:center;align-items:center;gap:8px;padding:12px;border-radius:0 0 4px 4px"},Gt={name:"1kvnwqk",styles:"font-size:22px"},Vt={name:"14is9qy",styles:"font-size:20px"};const Xt=({recording:e,idx:t})=>{const{t:r,i18n:n}=(0,d.Bd)(),{title:i,presenter:c}=(0,v.pv)(),{isHighContrast:u}=(0,o.Ut)(),p=(0,v.wA)(),h=Ce(),m=(0,a.useRef)(null);Se(ye.finish.download,()=>{m.current?.click()});const{deviceType:f,mimeType:b,url:x,downloaded:w,media:y}=e,Y=r("desktop"===f?"sources-display":"sources-user"),k=(0,g.F2)({mime:b,flavor:Y,title:i,presenter:c});return x?(0,A.FD)("div",{css:Wt,children:[(0,A.FD)("div",{css:qt,children:[(0,A.Y)("video",{tabIndex:-1,muted:!0,src:x,onLoadedData:e=>e.currentTarget.currentTime=0,preload:"auto",css:Nt}),w&&(0,A.FD)("div",{css:Kt,children:[(0,A.Y)(S.e8Y,{css:Gt}),r("steps.finish.save-locally.recording-saved")]})]}),(0,A.FD)("a",{ref:m,"aria-label":r(`steps.finish.save-locally.save-${f}-locally`),target:"_blank",download:k,href:x,rel:"noopener noreferrer",role:"button",onClick:()=>p({type:"MARK_DOWNLOADED",index:t}),onKeyDown:e=>{" "===e.key&&(e.preventDefault(),m.current?.click())},css:(0,s.AH)({...Ar(u),justifyContent:"center",maxWidth:260,margin:"auto",marginTop:8},"",""),children:[(0,A.Y)(l.a4x,{css:Vt}),r("steps.finish.save-locally.label")+" ("+Rr(y.size,n)+")",h&&(0,A.Y)("div",{css:(0,s.AH)({position:"absolute",right:-4,bottom:-4},"",""),children:(0,A.Y)(De,{shortcut:ye.finish.download})})]})]}):null};var Zt=r(8432),Qt=r(9785);const Jt="ocStudioLastPresenter";let er=[];const tr=()=>{const e=(0,O.t0)(),{t:t}=(0,d.Bd)(),r=(0,Je.Z1)(),{recordings:n,upload:i,title:s,presenter:l,...c}=(0,v.pv)(),u=(0,v.wA)();function p(e){const t=Date.now();er.push({timestamp:t,progress:e});const r=Math.min(er.findIndex(e=>t-e.timestamp<5e3),Math.max(0,er.length-6));er.splice(0,r);let n=null;if(er.length>=4){const r=t-er[0].timestamp,i=(e-er[0].progress)/r*1e3,o=1-e;n=Math.max(0,Math.round(o/i))}i.secondsLeft===n&&i.currentProgress===e||u({type:"UPLOAD_PROGRESS_UPDATE",secondsLeft:n,currentProgress:e})}(0,a.useEffect)(()=>{const e=setInterval(()=>{if("uploading"===i.state)if(er.length){const e=er[er.length-1];Date.now()-e.timestamp>3e3&&p(e.progress)}else p(0)},1e3);return()=>clearInterval(e)});const h=async i=>{u({type:"UPLOAD_REQUEST"}),er.push({timestamp:Date.now(),progress:0});const s=await r.upload({recordings:n.filter(Boolean),title:i.title,presenter:i.presenter,series:i.series,uploadSettings:e.upload,onProgress:p,start:c.start,end:c.end,startTime:c.recordingStartTime??(0,o.HB)("no start time set"),endTime:c.recordingEndTime??(0,o.HB)("no end time set")});er=[];const a=e=>u({type:"UPLOAD_ERROR",msg:e});console.log({result:s}),(0,o.YW)(s,{success:()=>u({type:"UPLOAD_SUCCESS"}),network_error:()=>a(t("steps.finish.upload.upload-network-error")),not_authorized:()=>a(t("steps.finish.upload.upload-not-authorized")),unexpected_response:()=>a(t("steps.finish.upload.upload-invalid-response")),unknown_error:()=>a(t("steps.finish.upload.upload-unknown-error"))})};switch(i.state){case"uploading":return(0,A.Y)(fr,{currentProgress:i.currentProgress,secondsLeft:i.secondsLeft});case"uploaded":return(0,A.Y)(xr,{});default:return(0,A.Y)(sr,{uploadState:i,handleUpload:h})}};var rr={name:"q3psig",styles:"font-size:16px;font-weight:700;margin-top:20px"},nr={name:"14is9qy",styles:"font-size:20px"},ir={name:"hkh81z",styles:"margin-top:8px"},or={name:"ti75j2",styles:"margin:0"};const sr=({handleUpload:e})=>{const{titleField:t="required",presenterField:r="required",seriesField:n="optional",autofillPresenter:i=[]}=(0,O.t0)().upload??{},{t:c,i18n:u}=(0,d.Bd)(),p=(0,Je.Z1)(),h=(0,v.wA)(),m=(0,O.CA)(),{title:g,presenter:f,upload:b,recordings:x}=(0,v.pv)(),w=f||window.localStorage.getItem(Jt)||i.map(e=>(0,o.YW)(e,{opencast:()=>p.getUsername()})).find(Boolean)||"",[y,Y]=(0,a.useState)("idle"),{formState:{errors:k},handleSubmit:S,register:C,control:D,getValues:R}=(0,Qt.mN)({defaultValues:m.formValues().opencast}),{field:E}=(0,Qt.as)({name:"series",control:D,rules:{required:"required"===n&&c("steps.finish.upload.validation-error-required")}});function H(e){const t=e.target;h({type:(0,o.d6)({title:"UPDATE_TITLE",presenter:"UPDATE_PRESENTER"}[t.name]),value:t.value}),"presenter"===t.name&&window.localStorage.setItem(Jt,t.value)}(0,a.useEffect)(()=>{w!==f&&h({type:"UPDATE_PRESENTER",value:w})},[]);const F=m.isConfigurable("opencast.serverUrl"),T=m.isUsernameConfigurable(),L=m.isPasswordConfigurable(),z=F||T||L,U=e=>({serverUrl:e.serverUrl,loginName:e.loginName,loginPassword:e.loginPassword}),I=x.reduce((e,t)=>e+t.media.size,0),P=Rr(I,u),{isHighContrast:$}=(0,o.Ut)(),M=async()=>{const e=R(),t=m.settings().opencast;if(!(e.serverUrl&&e.serverUrl!==t?.serverUrl||e.loginName&&e.loginName!==t?.loginName||e.loginPassword&&e.loginPassword!==t?.loginPassword))return;const r=U(e),n=await Je.cI.init({...m.settings().opencast,...r});"logged_in"===n.getState()&&(p.setGlobalInstance(n),m.saveSettings({opencast:r}))};return(0,A.FD)(A.FK,{children:[(0,A.FD)("form",{onSubmit:S(async t=>{if(!z)return void await e(t);console.log(t),Y("testing");const r=U(t),n=await Je.cI.init({...m.settings().opencast,...r}),i=n.getState();if("logged_in"===i)p.setGlobalInstance(n),m.saveSettings({opencast:r}),await e(t);else{const e=(0,o.YW)(i,{incorrect_login:()=>p.isLoginProvided()?c("steps.finish.upload.settings-invalid-provided-login"):c("steps.finish.upload.settings-invalid-login-data"),network_error:()=>c("steps.finish.upload.upload-network-error"),invalid_response:()=>c("steps.finish.upload.upload-invalid-response"),response_not_ok:()=>c("steps.finish.upload.upload-invalid-response")})??(0,o.HB)();h({type:"UPLOAD_ERROR",msg:e}),Y("idle")}}),children:["hidden"!==t&&(0,A.Y)(dr,{name:"title",label:c("steps.finish.upload.label-title"),required:"required"===t,onChange:H,autoComplete:"off",defaultValue:g,autoFocus:!0,errors:k,register:C}),"hidden"!==r&&(0,A.Y)(dr,{name:"presenter",label:c("steps.finish.upload.label-presenter"),required:"required"===r,onChange:H,autoComplete:"off",defaultValue:w,errors:k,register:C}),"hidden"!==n&&(0,A.Y)(pr,{formProps:E,showOpencastSection:z,errors:k}),z&&(0,A.FD)(A.FK,{children:[(0,A.Y)("h3",{css:rr,children:c("steps.finish.upload.settings-header")}),F&&(0,A.Y)(dr,{errors:k,label:c("steps.finish.upload.settings-label-server-url"),name:"serverUrl",register:C,onBlur:M,required:!0,validate:e=>{try{const t=new URL(e);return"https:"===t.protocol||"http:"===t.protocol||c("steps.finish.upload.settings-invalid-url-http-start")}catch{let t=c("steps.finish.upload.settings-invalid-url");return e.startsWith("https://")||e.startsWith("http://")||(t+=" "+c("steps.finish.upload.settings-invalid-url-http-start")),t}}}),T&&(0,A.Y)(dr,{errors:k,label:c("steps.finish.upload.settings-label-username"),name:"loginName",register:C,onBlur:M,required:!0}),L&&(0,A.Y)(dr,{errors:k,label:c("steps.finish.upload.settings-label-password"),name:"loginPassword",register:C,onBlur:M,required:!0,type:"password"})]}),(0,A.FD)(o.b1,{type:"submit",css:(0,s.AH)({...Ar($),margin:"0 auto",marginTop:24},"",""),children:[(0,o.YW)(y,{idle:()=>(0,A.Y)(l.B88,{css:nr}),testing:()=>(0,A.Y)(o.y$,{size:20})}),(0,A.Y)("span",{children:c("steps.finish.upload.label")+" ("+P+")"})]})]}),(0,A.Y)("div",{css:ir,children:"error"===b.state&&(0,A.Y)(B,{css:or,body:(0,o.d6)(b.error),extraBody:c("steps.finish.upload.warn-download-hint")})})]})};var ar={name:"cn3xcj",styles:"margin-bottom:12px"},lr={name:"mk6g3b",styles:"display:block;box-sizing:border-box;position:relative;text-align:left"};const dr=({errors:e,register:t,label:r,name:n,required:i,validate:o,type:l="text",...c})=>{const{t:u}=(0,d.Bd)(),p=e[n],h=(0,a.useId)();return(0,A.FD)("div",{css:ar,children:[(0,A.Y)("label",{htmlFor:h,css:(0,s.AH)({display:"block",fontWeight:700,color:g.lm.neutral70,margin:"4px 0",fontSize:14},"",""),children:r}),(0,A.FD)("div",{css:lr,children:[(0,A.Y)("input",{id:h,"aria-invalid":p?"true":"false","aria-describedby":p?`${n}Error`:h,autoComplete:"off",type:l,...c,...t(n,{validate:o,onChange:c.onChange,onBlur:c.onBlur,...i&&{required:u("steps.finish.upload.validation-error-required")}}),css:(0,s.AH)({display:"block",width:"100%",borderRadius:4,border:`1px solid ${p?g.lm.danger4:g.lm.neutral30}`,backgroundColor:g.lm.neutral00,color:g.lm.neutral70,padding:"8px 16px",...(0,g.Y$)({offset:-1})},"","")}),p&&(0,A.Y)(cr,{id:`${n}Error`,children:p.message})]})]})},cr=({id:e,children:t})=>(0,A.Y)("div",{id:e,css:(0,s.AH)({backgroundColor:g.lm.danger1,color:g.lm.danger5,marginTop:4,borderRadius:4,padding:"6px 12px",lineHeight:1.2},"",""),children:t});var ur={name:"cn3xcj",styles:"margin-bottom:12px"};const pr=({formProps:e,showOpencastSection:t,errors:r})=>{const{t:n,i18n:i}=(0,d.Bd)(),l=(0,Je.Z1)(),{scheme:c}=(0,o.Ut)(),u=(0,O.t0)().upload?.seriesId,[p,h]=(0,a.useState)(null),m=(0,a.useRef)(null);(0,a.useEffect)(()=>{h(null),l.getSeries().then(e=>{const t=[...e.entries()].map(([e,t])=>({value:e,label:t}));if(t.sort((e,t)=>e.label.localeCompare(t.label,i.language,{sensitivity:"base"})),u){const r=e.get(u),i={label:r??n("steps.finish.upload.series-unknown"),value:u};null==r&&t.push(i),m.current?.setValue(i,"select-option")}h(t)},e=>{console.log("Error fetching series: ",e),h("error")})},[l,n,i.language,u]);const v=(0,a.useId)(),f=(0,a.useId)(),b="error"===p;return(0,A.FD)("div",{css:ur,children:[(0,A.Y)("label",{htmlFor:v,css:(0,s.AH)({display:"block",fontWeight:700,color:g.lm.neutral70,margin:"4px 0",fontSize:14},"",""),children:n("steps.finish.upload.label-series")}),(0,A.Y)(Zt.Ay,{id:v,ref:m,options:p&&"error"!==p?p:[],isLoading:null===p,isDisabled:"error"===p,isClearable:!0,isSearchable:!0,onChange:t=>e.onChange(t?.value),onBlur:e.onBlur,"aria-invalid":b?"true":"false","aria-describedby":b?f:v,placeholder:n("steps.finish.upload.series-placeholder"),loadingMessage:()=>n("steps.finish.upload.series-loading"),noOptionsMessage:()=>n("steps.finish.upload.series-none"),styles:hr(c.startsWith("dark"),c.endsWith("high-contrast")),theme:e=>({...e,colors:{...e.colors,danger:g.lm.danger0,primary:g.lm.focus,neutral0:g.lm.neutral00,neutral5:g.lm.neutral15,neutral10:g.lm.neutral20,neutral20:g.lm.neutral30,neutral30:g.lm.neutral40,neutral40:g.lm.neutral50,neutral50:g.lm.neutral50,neutral60:g.lm.neutral60,neutral70:g.lm.neutral70,neutral80:g.lm.neutral80,neutral90:g.lm.neutral90}})}),b&&(0,A.FD)(cr,{id:f,children:[n("steps.finish.upload.series-fetch-error"),t&&" "+n("steps.finish.upload.series-connection-settings-hint")]}),r.series&&(0,A.Y)(cr,{id:f,children:r.series.message})]})},hr=(e,t)=>({control:(e,t)=>({...e,backgroundColor:g.lm.neutral00,paddingLeft:8,...!t.isFocused&&{borderColor:g.lm.neutral30},...t.isFocused&&{boxShadow:`0 0 0 1.5px ${g.lm.focus}`}}),input:e=>({...e,color:g.lm.neutral80,padding:"4px 0"}),placeholder:e=>({...e,color:g.lm.neutral60}),singleValue:e=>({...e,color:g.lm.neutral90}),menuList:e=>({...e,padding:0}),menu:r=>({...r,...e&&{outline:`1px solid ${g.lm.neutral20}`},...t&&{outline:`1px solid ${g.lm.neutral90}`},backgroundColor:e?g.lm.neutral10:g.lm.neutral05,overflow:"hidden"}),option:(r,n)=>({cursor:"default",padding:"6px 10px",borderLeft:`4px solid ${n.isSelected?g.lm.focus:"transparent"}`,...t&&n.isFocused&&{outline:`2px solid ${g.lm.neutral90}`,outlineOffset:-3},...(n.isFocused||n.isSelected)&&!t&&{backgroundColor:e?g.lm.neutral25:g.lm.neutral10}})});var mr={name:"1j389vi",styles:"font-weight:700"},gr={name:"zjik7",styles:"display:flex"},vr={name:"82a6rk",styles:"flex:1"};const fr=({currentProgress:e,secondsLeft:t})=>{const{t:r,i18n:n}=(0,d.Bd)(),i=Math.min(100,100*e).toLocaleString(n.language,{minimumFractionDigits:1,maximumFractionDigits:1});let o;return o=null===t?null:t<4?r("steps.finish.upload.time.a-few-seconds"):t<45?`${t} ${r("steps.finish.upload.time.seconds")}`:t<90?r("steps.finish.upload.time.a-minute"):t<2700?`${Math.round(t/60)} ${r("steps.finish.upload.time.minutes")}`:t<5400?r("steps.finish.upload.time.an-hour"):t<86400?`${Math.round(t/3600)} ${r("steps.finish.upload.time.hours")}`:null,(0,A.FD)(wr,{children:[(0,A.Y)("div",{css:mr,children:r("steps.finish.upload.currently-uploading")}),(0,A.Y)("div",{css:(0,s.AH)({marginTop:16,marginBottom:8,height:6,borderRadius:3,backgroundColor:g.lm.neutral05,overflow:"hidden"},"",""),children:(0,A.Y)("div",{css:(0,s.AH)({width:100*e+"%",height:"100%",backgroundColor:g.lm.accent5},"","")})}),(0,A.FD)("div",{css:gr,children:[(0,A.FD)("div",{children:[i,"%"]}),(0,A.Y)("div",{css:vr}),(0,A.Y)("div",{children:o&&(0,A.FD)(d.x6,{i18nKey:"steps.finish.upload.time.left",children:[{time:o}," left"]})})]})]})};var br={name:"1j389vi",styles:"font-weight:700"};const xr=()=>{const{t:e}=(0,d.Bd)();return(0,A.FD)(wr,{children:[(0,A.Y)("div",{css:br,children:e("steps.finish.upload.complete")}),(0,A.Y)("div",{css:(0,s.AH)({fontSize:50,margin:24,lineHeight:0,color:g.lm.accent5},"",""),children:(0,A.Y)(S.e8Y,{})}),(0,A.Y)("div",{children:e("steps.finish.upload.complete-explanation")})]})},wr=({children:e})=>(0,A.Y)("div",{css:(0,s.AH)({backgroundColor:g.lm.neutral10,fontSize:14,marginTop:24,padding:24,borderRadius:6,textAlign:"center"},"",""),children:e});var yr={name:"s8j37n",styles:"height:calc(35%)"},Yr={name:"1ya0myq",styles:"height:calc(65%)"};const kr=({goToPrevStep:e,goToFirstStep:t})=>{const{t:r}=(0,d.Bd)(),{recordings:n,upload:i}=(0,v.pv)(),a=(0,v.wA)(),c=(0,O.t0)(),u=n.every(e=>e.downloaded),p=("uploaded"===i.state||u)&&"uploading"!==i.state,h="not_uploaded"!==i.state||u,m={label:r("steps.finish.new-recording"),icon:(0,A.Y)(S.vAB,{}),onClick:()=>{window.confirm(r("steps.finish.new-recording-warning"))&&(a({type:"RESET"}),t())}},g=Dr(c),f=g?{label:r("steps.finish.finish-button"),disabled:!p,popoverEntries:[m,{label:c.return?.label?r("steps.finish.return-to",{label:c.return.label}):r("steps.finish.return-to-no-label"),href:g,icon:(0,A.Y)(l.q_G,{})}]}:{disabled:!p,...m};return Se(ye.finish.startNewRecording,m.onClick,{enabled:p}),(0,A.FD)(Oe,{title:r("steps.finish.label"),prevButton:h?void 0:{onClick:e},nextButton:f,children:[(0,A.Y)("div",{css:yr}),(0,A.FD)("div",{css:(0,s.AH)({display:"flex",justifyContent:"center",alignItems:"start",gap:16,[(0,o.pi)(700)]:{flexDirection:"column",alignItems:"center"}},"",""),children:[(0,A.Y)(Cr,{title:r("steps.finish.upload.label"),children:(0,A.Y)(tr,{})}),(0,A.Y)(Cr,{title:r("steps.finish.save-locally.label"),children:(0,A.Y)(_t,{})})]}),(0,A.Y)("div",{css:Yr})]})};var Sr={name:"15ara9j",styles:"text-align:center;font-size:20px;font-weight:700;margin-bottom:12px"};const Cr=({title:e,children:t})=>{const{isHighContrast:r}=(0,o.Ut)();return(0,A.FD)("div",{css:(0,s.AH)({maxWidth:420,width:"100%",backgroundColor:g.lm.neutral05,boxShadow:r?"none":"0 4px 16px var(--shadow-color)",border:`1px solid ${g.lm.neutral15}`,padding:"24px 32px",borderRadius:6,minHeight:330},"",""),children:[(0,A.Y)("h2",{css:Sr,children:e}),t]})},Dr=e=>{if(!e.return?.target)return null;let t;try{t=new URL(e.return.target,window.location.href)}catch{return null}return![window.location.hostname,...e.return?.allowedDomains||[]].some(e=>t.hostname===e)||"https:"!==t.protocol&&"http:"!==t.protocol?null:e.return.target},Ar=e=>({display:"flex",alignItems:"center",padding:"8px 12px",gap:12,borderRadius:8,textDecoration:"none",position:"relative",":not([disabled])":{color:g.lm.neutral05,cursor:"pointer",backgroundColor:g.lm.accent7,":hover":{backgroundColor:g.lm.accent8,...e&&{backgroundColor:g.lm.neutral15,outline:`2px solid ${g.lm.accent8}`,color:g.lm.neutral20}}},"&[disabled]":{backgroundColor:g.lm.neutral15,color:g.lm.neutral70},...(0,g.Y$)({offset:1})}),Rr=(e,t)=>{const r=e=>{const r=e<10?1:0;return e.toLocaleString(t.language,{minimumFractionDigits:r,maximumFractionDigits:r})};return e<1e3?`${e} B`:e<999500?`${r(e/1e3)} KB`:e<9995e5?`${r(e/1e6)} MB`:`${r(e/1e9)} GB`},Er=["video-select","audio-select","recording","review","finish"],Hr=e=>Er.indexOf(e),Fr=({inert:e})=>{const[t,r]=(0,a.useState)("video-select"),n={goToNextStep:()=>r((0,o.d6)(Er[Hr(t)+1])),goToPrevStep:()=>r((0,o.d6)(Er[Hr(t)-1])),goToFirstStep:()=>r("video-select")};return(0,A.FD)("main",{inert:e,css:(0,s.AH)({display:"flex",flex:1,backgroundColor:g.lm.neutral10,[(0,o.pi)(g.LO.large)]:{flexDirection:"column-reverse"}},"",""),children:[(0,A.Y)(Tr,{currentStep:t}),(0,o.YW)(t,{"video-select":()=>(0,A.Y)(Me,{...n}),"audio-select":()=>(0,A.Y)(Qe,{...n}),recording:()=>(0,A.Y)(dt,{...n}),review:()=>(0,A.Y)(jt,{...n}),finish:()=>(0,A.Y)(kr,{...n})})]})},Tr=({currentStep:e})=>{const{t:t}=(0,d.Bd)(),{isHighContrast:r}=(0,o.Ut)(),n=Hr(e),i=[t("steps.video.label"),t("steps.audio.label"),t("steps.record.label"),t("steps.review.label"),t("steps.finish.label")],a="calc(8px + max(0px, 20% - 44px))";return(0,A.Y)("div",{css:(0,s.AH)({position:"relative",flexShrink:"0",backgroundColor:g.lm.neutral05,...r&&{borderRight:`1px solid ${g.lm.neutral90}`},[(0,o.aO)(g.LO.large)]:{width:160,minWidth:160},[(0,o.pi)(g.LO.large)]:{height:42}},"",""),children:(0,A.FD)("div",{css:(0,s.AH)({position:"absolute",display:"flex",justifyContent:"space-between",[(0,o.aO)(g.LO.large)]:{flexDirection:"column",left:8,top:a,bottom:a},[(0,o.pi)(g.LO.large)]:{flexDirection:"row",top:8,left:a,right:a}},"",""),children:[i.map((e,t)=>{let r;return r=t<n?(0,A.Y)(m,{}):t===n?(0,A.Y)(p,{}):(0,A.Y)(l.sxA,{}),(0,A.FD)("div",{css:(0,s.AH)({display:"flex",gap:12,alignItems:"center",zIndex:100,backgroundColor:g.lm.neutral05,svg:{color:t===n?g.lm.accent6:g.lm.neutral40,fontSize:26,flexShrink:0,strokeWidth:48/26,[(0,o.aO)(g.LO.large)]:{margin:"4px 0"},[(0,o.pi)(g.LO.large)]:{margin:"0 4px"}}},"",""),children:[r,(0,A.Y)("div",{css:(0,s.AH)({fontSize:14,lineHeight:1.2,color:t==n?g.lm.accent8:g.lm.neutral70,[(0,o.pi)(g.LO.large)]:{display:"none"}},"",""),children:e})]},t)}),(0,A.Y)("div",{css:(0,s.AH)({position:"absolute",border:`1px solid ${g.lm.neutral40}`,[(0,o.aO)(g.LO.large)]:{top:13,bottom:13,left:12},[(0,o.pi)(g.LO.large)]:{left:13,right:13,top:12}},"","")})]})})};var Lr,Br,Or=r(7909),zr=r(3855);function Ur(){return Ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ur.apply(null,arguments)}var Ir=e=>a.createElement("svg",Ur({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24"},e),Lr||(Lr=a.createElement("rect",{width:22,height:14,x:1,y:5,rx:1,ry:1})),Br||(Br=a.createElement("path",{d:"M6 9h.001M10 9zM14 9zM18 9h.001M8 12zM12 12zM16 12h.001M6 15h12"}))),Pr=[{short:"en",long:"English",rtl:!1},{short:"de",long:"Deutsch",rtl:!1},{short:"nl",long:"Nederlands",rtl:!1},{short:"es",long:"EspaÃ±ol",rtl:!1},{short:"fa",long:"ÙØ§Ø±Ø³ÛŒ",rtl:!0},{short:"fr",long:"FranÃ§ais",rtl:!1},{short:"sl",long:"SlovenÅ¡Äina",rtl:!1},{short:"zh",long:"ç®€ä½“ä¸­æ–‡",rtl:!1},{short:"ca",long:"CatalÃ ",rtl:!1},{short:"it",long:"Italiano",rtl:!1}];const $r=({setOverlayBoxState:e,inert:t})=>{const{scheme:r,isHighContrast:n}=(0,o.Ut)();return(0,A.FD)("header",{inert:t,css:(0,s.AH)({backgroundColor:(0,o.YW)(r,{light:()=>g.lm.neutral60,dark:()=>g.lm.neutral20,"dark-high-contrast":()=>"black","light-high-contrast":()=>"black"}),color:n?"white":"inherit",height:"var(--header-height)",display:"flex",justifyContent:"space-between",..."dark-high-contrast"===r?{borderBottom:"1px solid white"}:{paddingBottom:1}},"",""),children:[(0,A.Y)(Mr,{}),(0,A.Y)(jr,{setOverlayBoxState:e})]})},Mr=()=>{const e=e=>zr.h.publicPath+e;return(0,A.FD)("picture",{css:(0,s.AH)({height:"100%",display:"flex",opacity:"dark"===(0,o.Ut)().scheme?.8:1,paddingLeft:8,alignItems:"center","> *":{height:"calc(100% - 12px)"},[(0,o.pi)(410)]:{paddingLeft:0}},"",""),children:[(0,A.Y)("source",{media:"(min-width: 920px)",srcSet:e("logo-wide.svg")}),(0,A.Y)("img",{src:e("logo-narrow.svg"),alt:"Opencast Studio Logo"})]})},jr=({setOverlayBoxState:e})=>(0,A.FD)("div",{css:(0,s.AH)({display:"flex",gap:16,height:"100%",alignItems:"center",paddingRight:24,[(0,o.pi)(410)]:{gap:2,paddingRight:8}},"",""),children:[(0,A.Y)(_r,{}),(0,A.Y)(Wr,{}),(0,A.Y)(Nr,{open:()=>e("shortcuts")}),(0,A.Y)(qr,{open:()=>e("info")})]}),_r=()=>{const{t:e,i18n:t}=(0,d.Bd)(),r=e=>e===t.resolvedLanguage,n=Object.values(Pr).map(e=>(0,o.GK)({checked:r(e.short),children:(0,A.Y)(A.FK,{children:e.long}),onClick:()=>{r(e.short)||t.changeLanguage(e.short)}})),i=e("header.language.label");return(0,A.Y)(o.Tc,{menu:{label:i,items:n,breakpoint:g.LO.small},children:(0,A.Y)(Kr,{icon:(0,A.Y)(Or.sIu,{}),label:i})})},Wr=()=>{const{t:e}=(0,d.Bd)(),{scheme:t,isAuto:r,update:n}=(0,o.Ut)(),i=r?"auto":t,s=["auto","light","dark","light-high-contrast","dark-high-contrast"].map(t=>(0,o.GK)({checked:i===t,children:(0,A.Y)(A.FK,{children:e(`header.theme.${t}`)}),onClick:()=>n(t)}));return(0,A.Y)(o.Tc,{menu:{label:e("header.theme.label"),items:s,breakpoint:g.LO.small},children:(0,A.Y)(Kr,{icon:(0,A.Y)(l.hkc,{}),label:e("header.theme.label")})})},qr=({open:e})=>{const{t:t}=(0,d.Bd)();return(0,A.Y)(Kr,{onClick:e,icon:(0,A.Y)(l.S8s,{}),label:t("header.info.label")})},Nr=({open:e})=>{const{t:t}=(0,d.Bd)();Se(ye.general.showOverview,e,{useKey:!0});const r=Ce();return(0,A.Y)(Kr,{onClick:e,icon:(0,A.Y)(Ir,{}),label:t("shortcuts.label"),children:r&&(0,A.Y)("div",{css:(0,s.AH)({position:"absolute",bottom:-20,left:20,padding:2,borderRadius:4,backgroundColor:g.lm.neutral05},"",""),children:(0,A.Y)(De,{shortcut:ye.general.showOverview})})})},Kr=(0,a.forwardRef)(({icon:e,label:t,children:r,...n},i)=>{const{scheme:a,isHighContrast:l}=(0,o.Ut)();return(0,A.FD)(o.b1,{...n,ref:i,css:(0,s.AH)({position:"relative",display:"flex",gap:8,alignItems:"center",fontSize:16,fontFamily:"inherit",fontWeight:500,color:(0,o.YW)(a,{light:()=>g.lm.neutral05,dark:()=>g.lm.neutral90,"dark-high-contrast":()=>"white","light-high-contrast":()=>"white"}),borderRadius:6,padding:"6px 8px",":hover, :active":{outline:`2px solid ${l?"#aaa":g.lm.neutral50}`,backgroundColor:(0,o.YW)(a,{light:()=>g.lm.neutral70,dark:()=>g.lm.neutral10,"dark-high-contrast":()=>"none","light-high-contrast":()=>"none"})},...(0,g.Y$)({},(0,o.YW)(a,{light:()=>g.lm.neutral10,dark:()=>g.lm.accent8,"dark-high-contrast":()=>"#aaa","light-high-contrast":()=>"#aaa"})),"> svg":{fontSize:22,"@media (max-width: 770px)":{fontSize:26}}},"",""),children:[e,(0,A.Y)("span",{css:(0,s.AH)({"@media (max-width: 770px)":{display:"none"}},"",""),children:t}),r]})}),Gr=({close:e})=>(0,A.Y)(Jr,{maxWidth:800,close:e,title:"Opencast Studio",children:(0,A.FD)("article",{css:(0,s.AH)({p:{margin:"8px 0"},h2:{marginTop:24,marginBottom:4,fontSize:21},a:{color:g.lm.accent7,"&:hover":{textDecoration:"none",color:g.lm.accent8}}},"",""),children:[(0,A.FD)("p",{children:["A web-based recording studio for ",(0,A.Y)("a",{href:"https://opencast.org",children:"Opencast"}),"."]}),(0,A.Y)("p",{children:"Opencast Studio allows you to record your camera, your display and your microphoneÊ¼s audio. You can then either download your recordings or upload them directly to an Opencast instance (usually the one of your university)."}),(0,A.FD)("p",{children:["This is free software under the terms of the"," ",(0,A.Y)("a",{href:"https://github.com/opencast/studio/blob/main/LICENSE",children:"MIT License"})," ","developed by ",(0,A.Y)("a",{href:"https://elan-ev.de",children:"elan e.V."})," in cooperation with the ",(0,A.Y)("a",{href:"https://ethz.ch",children:"ETH ZÃ¼rich"}),"."]}),(0,A.Y)("h2",{children:"How it works"}),(0,A.Y)("p",{children:"Opencast Studio uses the recording capabilities built into modern browsers to record audio and video streams. The recording happens in the userÊ¼s browser and no server is involved in the recording."}),(0,A.Y)("h2",{children:"Support"}),(0,A.FD)("p",{children:["If you are experiencing any difficulties or found any bugs, please take a look at the"," ",(0,A.Y)("a",{href:"https://github.com/opencast/studio/issues",children:"issue tracker on GitHub"}),". Before filing a new issue, please check if one about your topic already exists. We regularly check incoming issues and do our best to address bugs in a timely manner."]}),(0,A.Y)("h2",{children:"Credits"}),(0,A.Y)("p",{children:"Thanks to the following people and institutions for contributing to this project:"}),(0,A.FD)("ul",{children:[(0,A.FD)("li",{children:[(0,A.Y)("a",{href:"https://github.com/slampunk",children:"Duncan Smith"})," for starting this project"]}),(0,A.FD)("li",{children:[(0,A.Y)("a",{href:"https://github.com/cilt-uct",children:"University of Cape Town (CILT)"})," ","for letting Duncan start the project"]}),(0,A.FD)("li",{children:[(0,A.Y)("a",{href:"https://ethz.ch",children:"ETH ZÃ¼rich"})," for financial support and testing"]}),(0,A.FD)("li",{children:[(0,A.Y)("a",{href:"https://github.com/elan-ev",children:"elan e.V."})," for the re-implementation and the ongoing development"]}),(0,A.Y)("li",{children:"And many members from the Opencast community who helped along the way."})]}),(0,A.Y)("h2",{children:"Version"}),(0,A.FD)("p",{children:["Build date ",zr.h.buildDate??"?",", commit"," ",(0,A.Y)("a",{"aria-label":"Git commit on GitHub",href:"https://github.com/opencast/studio/commit/"+zr.h.commitSha,children:zr.h.commitSha??"?"}),"."]})]})}),Vr=()=>{const[e,t]=(0,a.useState)("none"),r=()=>t("none");Se(ye.general.closeOverlay,r);const n="none"!==e;return(0,A.FD)("div",{css:(0,s.AH)({"--header-height":"64px",display:"flex",flexDirection:"column",height:"100%",..."none"!==e&&{overflowY:"hidden"}},"",""),children:[(0,A.Y)($r,{inert:n,setOverlayBoxState:t}),(0,o.YW)(e,{none:()=>null,info:()=>(0,A.Y)(Gr,{close:r}),shortcuts:()=>(0,A.Y)(Ae,{close:r})}),(0,A.Y)(Fr,{inert:n})]})};var Xr={name:"4dbrlo",styles:"position:absolute;top:0;left:0;right:0;bottom:0;padding:32px 8px;z-index:800;background-color:rgba(0, 0, 0, 0.3);backdrop-filter:blur(8px);display:flex;flex-direction:column;align-items:center;@media (min-height: 400px){padding-top:calc(var(--header-height) + 32px);}"},Zr={name:"1ere486",styles:"margin-bottom:8px;font-size:26px"},Qr={name:"1suo034",styles:"padding-right:16px;overflow-y:auto"};const Jr=({close:e,title:t,children:r,maxWidth:n})=>{const i="light"===(0,o.Ut)().scheme,{isHighContrast:d}=(0,o.Ut)(),c=(0,a.useRef)(null);(0,o.gH)(c,e);const u=i||d?g.lm.neutral05:g.lm.neutral15;return(0,A.Y)("div",{role:"dialog","aria-modal":"true",css:Xr,children:(0,A.FD)("div",{ref:c,css:(0,s.AH)({position:"relative",backgroundColor:u,borderRadius:8,padding:"24px 24px 32px 48px",width:"82%",flex:"0 1 auto",minHeight:0,maxWidth:n,display:"flex",flexDirection:"column",boxShadow:d?"none":"0 4px 16px var(--shadow-color))",outline:d?"2px solid var(--color-neutral90)":"none",[(0,o.pi)(850)]:{padding:24,paddingLeft:32},[(0,o.pi)(480)]:{width:"95%",padding:"12px 20px"}},"",""),children:[(0,A.Y)(l.yGN,{onClick:e,css:(0,s.AH)({position:"absolute",top:8,right:8,backgroundColor:u,borderRadius:"50%",fontSize:40,padding:4,cursor:"pointer"},"","")}),(0,A.Y)("h1",{css:Zr,children:t}),(0,A.Y)("div",{css:Qr,children:r})]})})},en=()=>(0,A.FD)(A.FK,{children:[(0,A.Y)(s.mL,{styles:rn}),(0,A.Y)(s.mL,{styles:tn})]}),tn={name:"cvwxji",styles:":root{--min-page-width:320px;}body{font-family:'Roboto Flex Variable', 'Vazirmatn Variable', sans-serif;font-weight:400;line-height:1.5;font-size:16px;min-width:var(--min-page-width);}"},rn={name:"wn0kj0",styles:"*, *::before, *::after{box-sizing:border-box;}body, h1, h2, h3, h4, p, li, figure, figcaption, blockquote, dl, dd, pre{margin:0;}html, body, body > #root{height:100%;}a{text-decoration-skip-ink:auto;}input, button, textarea, select{font:inherit;margin:0;}"},nn=()=>(0,A.FD)(A.FK,{children:[(0,A.Y)(en,{}),(0,A.Y)(on,{}),(0,A.Y)(o.Sv,{children:(0,A.Y)(Vr,{})})]}),on=()=>{const{recordings:e,upload:t}=(0,v.pv)(),r=e.every(e=>e.downloaded),n="uploaded"===t.state,i="uploading"===t.state;return(0,o.js)(e?.length>0&&!n&&!r||i),null}}}]);
//# sourceMappingURL=963.bundle.js.map